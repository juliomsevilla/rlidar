<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Introducción al lenguaje R | Tratamiento de datos LiDAR forestales mediante R</title>
  <meta name="description" content="En este libro haremos una introducción al tratamiento de datos LiDAR forestales mediante R" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Introducción al lenguaje R | Tratamiento de datos LiDAR forestales mediante R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="En este libro haremos una introducción al tratamiento de datos LiDAR forestales mediante R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Introducción al lenguaje R | Tratamiento de datos LiDAR forestales mediante R" />
  
  <meta name="twitter:description" content="En este libro haremos una introducción al tratamiento de datos LiDAR forestales mediante R" />
  

<meta name="author" content="Julio M. Sevilla" />


<meta name="date" content="2021-10-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="la-tecnología-lidar-y-su-aplicación-al-medio-forestal.html"/>
<link rel="next" href="r-y-lidar.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introducción</a></li>
<li class="chapter" data-level="1" data-path="la-tecnología-lidar-y-su-aplicación-al-medio-forestal.html"><a href="la-tecnología-lidar-y-su-aplicación-al-medio-forestal.html"><i class="fa fa-check"></i><b>1</b> La tecnología LIDAR y su aplicación al medio forestal</a>
<ul>
<li class="chapter" data-level="1.1" data-path="la-tecnología-lidar-y-su-aplicación-al-medio-forestal.html"><a href="la-tecnología-lidar-y-su-aplicación-al-medio-forestal.html#la-teledetección-y-la-tecnología-lidar"><i class="fa fa-check"></i><b>1.1</b> La teledetección y la tecnología LiDAR</a></li>
<li class="chapter" data-level="1.2" data-path="la-tecnología-lidar-y-su-aplicación-al-medio-forestal.html"><a href="la-tecnología-lidar-y-su-aplicación-al-medio-forestal.html#tipos-de-lidar"><i class="fa fa-check"></i><b>1.2</b> Tipos de LiDAR</a></li>
<li class="chapter" data-level="1.3" data-path="la-tecnología-lidar-y-su-aplicación-al-medio-forestal.html"><a href="la-tecnología-lidar-y-su-aplicación-al-medio-forestal.html#componentes-de-un-sistema-lidar-aerotransportado"><i class="fa fa-check"></i><b>1.3</b> Componentes de un sistema LIDAR aerotransportado</a></li>
<li class="chapter" data-level="1.4" data-path="la-tecnología-lidar-y-su-aplicación-al-medio-forestal.html"><a href="la-tecnología-lidar-y-su-aplicación-al-medio-forestal.html#el-dato-lidar"><i class="fa fa-check"></i><b>1.4</b> El dato LiDAR</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="la-tecnología-lidar-y-su-aplicación-al-medio-forestal.html"><a href="la-tecnología-lidar-y-su-aplicación-al-medio-forestal.html#capacidad-multirretono"><i class="fa fa-check"></i><b>1.4.1</b> Capacidad multirretono</a></li>
<li class="chapter" data-level="1.4.2" data-path="la-tecnología-lidar-y-su-aplicación-al-medio-forestal.html"><a href="la-tecnología-lidar-y-su-aplicación-al-medio-forestal.html#el-fichero-.laslaz"><i class="fa fa-check"></i><b>1.4.2</b> El fichero <code>*.las/laz</code></a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="la-tecnología-lidar-y-su-aplicación-al-medio-forestal.html"><a href="la-tecnología-lidar-y-su-aplicación-al-medio-forestal.html#la-clasificación-de-los-retornos"><i class="fa fa-check"></i><b>1.5</b> La clasificación de los retornos</a></li>
<li class="chapter" data-level="1.6" data-path="la-tecnología-lidar-y-su-aplicación-al-medio-forestal.html"><a href="la-tecnología-lidar-y-su-aplicación-al-medio-forestal.html#estimación-de-las-variables-de-la-masa-forestal"><i class="fa fa-check"></i><b>1.6</b> Estimación de las variables de la masa forestal</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html"><i class="fa fa-check"></i><b>2</b> Introducción al lenguaje R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#introducción-al-lenguaje-r-1"><i class="fa fa-check"></i><b>2.1</b> Introducción al lenguaje R</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#que-es-r"><i class="fa fa-check"></i><b>2.1.1</b> ¿Que es R?</a></li>
<li class="chapter" data-level="2.1.2" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#por-qué-usar-r"><i class="fa fa-check"></i><b>2.1.2</b> ¿Por qué usar R?</a></li>
<li class="chapter" data-level="2.1.3" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#recursos-sobre-r"><i class="fa fa-check"></i><b>2.1.3</b> Recursos sobre R</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#instalación-de-r-rstudio-y-librerias"><i class="fa fa-check"></i><b>2.2</b> Instalación de R, RStudio y librerias</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#instalación-de-r"><i class="fa fa-check"></i><b>2.2.1</b> Instalación de R</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#actualización-de-r"><i class="fa fa-check"></i><b>2.3</b> Actualización de R</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#el-sistema-r"><i class="fa fa-check"></i><b>2.3.1</b> El Sistema R</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#gestión-de-directorios-archivos-y-versiones"><i class="fa fa-check"></i><b>2.4</b> Gestión de directorios, archivos y versiones</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#gestión-de-directorios"><i class="fa fa-check"></i><b>2.4.1</b> Gestión de directorios</a></li>
<li class="chapter" data-level="2.4.2" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#manejo-de-archivos"><i class="fa fa-check"></i><b>2.4.2</b> Manejo de archivos</a></li>
<li class="chapter" data-level="2.4.3" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#carga-de-datos-usando-el-buscador"><i class="fa fa-check"></i><b>2.4.3</b> Carga de datos usando el buscador</a></li>
<li class="chapter" data-level="2.4.4" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#limpieza-de-la-memoria-en-r"><i class="fa fa-check"></i><b>2.4.4</b> Limpieza de la memoria en <code>R</code></a></li>
<li class="chapter" data-level="2.4.5" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#control-de-versiones"><i class="fa fa-check"></i><b>2.4.5</b> Control de versiones</a></li>
<li class="chapter" data-level="2.4.6" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#buenas-prácticas-en-la-gestión-de-un-proyecto"><i class="fa fa-check"></i><b>2.4.6</b> Buenas prácticas en la gestión de un proyecto</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#manejo-de-objetos-en-r"><i class="fa fa-check"></i><b>2.5</b> Manejo de objetos en R</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#r-como-calculadora"><i class="fa fa-check"></i><b>2.5.1</b> R como calculadora</a></li>
<li class="chapter" data-level="2.5.2" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#manejo-de-variables"><i class="fa fa-check"></i><b>2.5.2</b> Manejo de variables</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#manejo-de-datos-en-r"><i class="fa fa-check"></i><b>2.6</b> Manejo de datos en R</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#tipos-de-datos"><i class="fa fa-check"></i><b>2.6.1</b> Tipos de datos</a></li>
<li class="chapter" data-level="2.6.2" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#valores-perdidos-y-nulos"><i class="fa fa-check"></i><b>2.6.2</b> Valores perdidos y nulos</a></li>
<li class="chapter" data-level="2.6.3" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#registros-duplicados"><i class="fa fa-check"></i><b>2.6.3</b> Registros duplicados</a></li>
<li class="chapter" data-level="2.6.4" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#reescalado"><i class="fa fa-check"></i><b>2.6.4</b> Reescalado</a></li>
<li class="chapter" data-level="2.6.5" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#normalizado-y-estandarizado"><i class="fa fa-check"></i><b>2.6.5</b> Normalizado y estandarizado</a></li>
<li class="chapter" data-level="2.6.6" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#categorizar-los-datos"><i class="fa fa-check"></i><b>2.6.6</b> Categorizar los datos</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#profundizando-en-el-data.frame"><i class="fa fa-check"></i><b>2.7</b> Profundizando en el <code>data.frame</code></a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#introducción-1"><i class="fa fa-check"></i><b>2.7.1</b> Introducción</a></li>
<li class="chapter" data-level="2.7.2" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#visualizar-tablas"><i class="fa fa-check"></i><b>2.7.2</b> Visualizar tablas</a></li>
<li class="chapter" data-level="2.7.3" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#extracción-de-datos-en-nuevos-data.frame"><i class="fa fa-check"></i><b>2.7.3</b> Extracción de datos en nuevos <code>data.frame</code></a></li>
<li class="chapter" data-level="2.7.4" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#gestionar-los-data.frame"><i class="fa fa-check"></i><b>2.7.4</b> Gestionar los <code>data.frame</code></a></li>
<li class="chapter" data-level="2.7.5" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#la-libreria-dplyr"><i class="fa fa-check"></i><b>2.7.5</b> La libreria <code>dplyr</code></a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#estructuras-de-control"><i class="fa fa-check"></i><b>2.8</b> Estructuras de control</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#introducción-2"><i class="fa fa-check"></i><b>2.8.1</b> Introducción</a></li>
<li class="chapter" data-level="2.8.2" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#while"><i class="fa fa-check"></i><b>2.8.2</b> <code>while</code></a></li>
<li class="chapter" data-level="2.8.3" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#for"><i class="fa fa-check"></i><b>2.8.3</b> <code>for</code></a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#los-gráficos-en-r"><i class="fa fa-check"></i><b>2.9</b> Los gráficos en R</a>
<ul>
<li class="chapter" data-level="2.9.1" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#ggplot2"><i class="fa fa-check"></i><b>2.9.1</b> ggplot2</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#las-funciones-en-r"><i class="fa fa-check"></i><b>2.10</b> Las funciones en R</a>
<ul>
<li class="chapter" data-level="2.10.1" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#estructura-de-una-función"><i class="fa fa-check"></i><b>2.10.1</b> Estructura de una función</a></li>
</ul></li>
<li class="chapter" data-level="2.11" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#publicación-de-resultados"><i class="fa fa-check"></i><b>2.11</b> Publicación de resultados</a>
<ul>
<li class="chapter" data-level="2.11.1" data-path="introducción-al-lenguaje-r.html"><a href="introducción-al-lenguaje-r.html#la-escritura-con-markdown"><i class="fa fa-check"></i><b>2.11.1</b> La escritura con Markdown</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-y-lidar.html"><a href="r-y-lidar.html"><i class="fa fa-check"></i><b>3</b> R y LiDAR</a>
<ul>
<li class="chapter" data-level="3.1" data-path="r-y-lidar.html"><a href="r-y-lidar.html#preparación-del-entorno-de-trabajo"><i class="fa fa-check"></i><b>3.1</b> Preparación del entorno de trabajo</a></li>
<li class="chapter" data-level="3.2" data-path="r-y-lidar.html"><a href="r-y-lidar.html#limpieza-y-filtrado-de-los-datos-lidar"><i class="fa fa-check"></i><b>3.2</b> Limpieza y filtrado de los datos LiDAR</a></li>
<li class="chapter" data-level="3.3" data-path="r-y-lidar.html"><a href="r-y-lidar.html#clasificación-de-los-retornos"><i class="fa fa-check"></i><b>3.3</b> Clasificación de los retornos</a></li>
<li class="chapter" data-level="3.4" data-path="r-y-lidar.html"><a href="r-y-lidar.html#generación-de-los-modelos-digitales-del-terreno-y-de-las-elevaciones"><i class="fa fa-check"></i><b>3.4</b> Generación de los modelos digitales del terreno y de las elevaciones</a></li>
<li class="chapter" data-level="3.5" data-path="r-y-lidar.html"><a href="r-y-lidar.html#normalización"><i class="fa fa-check"></i><b>3.5</b> Normalización</a></li>
<li class="chapter" data-level="3.6" data-path="r-y-lidar.html"><a href="r-y-lidar.html#recorte-de-las-parcelas-de-campo-en-la-nube-de-puntos-lidar"><i class="fa fa-check"></i><b>3.6</b> Recorte de las parcelas de campo en la nube de puntos LiDAR</a></li>
<li class="chapter" data-level="3.7" data-path="r-y-lidar.html"><a href="r-y-lidar.html#cálculo-de-los-estadísticos-descriptivos-lidar-en-las-parcelas-de-campo"><i class="fa fa-check"></i><b>3.7</b> Cálculo de los estadísticos descriptivos LiDAR en las parcelas de campo</a></li>
<li class="chapter" data-level="3.8" data-path="r-y-lidar.html"><a href="r-y-lidar.html#ajuste-de-los-modelos-de-transición-por-estrato"><i class="fa fa-check"></i><b>3.8</b> Ajuste de los modelos de transición por estrato</a></li>
<li class="chapter" data-level="3.9" data-path="r-y-lidar.html"><a href="r-y-lidar.html#cálculo-de-los-estadísticos-descriptivos-lidar-en-todo-el-monte"><i class="fa fa-check"></i><b>3.9</b> Cálculo de los estadísticos descriptivos LiDAR en todo el monte</a></li>
<li class="chapter" data-level="3.10" data-path="r-y-lidar.html"><a href="r-y-lidar.html#aplicación-de-los-modelos-de-transición"><i class="fa fa-check"></i><b>3.10</b> Aplicación de los modelos de transición</a></li>
<li class="chapter" data-level="3.11" data-path="r-y-lidar.html"><a href="r-y-lidar.html#segmentación-de-árboles"><i class="fa fa-check"></i><b>3.11</b> Segmentación de árboles</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>4</b> Referencias</a></li>
<li class="divider"></li>
Ir a <a href="http://www.jsevilla.es/">JSEVILLA</a>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tratamiento de datos LiDAR forestales mediante R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introducción-al-lenguaje-r" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Introducción al lenguaje R</h1>
<div id="introducción-al-lenguaje-r-1" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Introducción al lenguaje R</h2>
<div id="que-es-r" class="section level3" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> ¿Que es R?</h3>
<p>R o The R Project for Statistical Computing <span class="citation">(<a href="#ref-R-base" role="doc-biblioref">R Core Team 2020</a>)</span> es un lenguaje y
entorno de programación de alto nivel, orientado a objetos y
fundamentalmente centrado al análisis estadístico y gráfico, distribuido
bajo la licencia GNU GPL y está disponible para los sistemas operativos
Windows, Macintosh, Unix y GNU/Linux.</p>
<p>El origen de R se remonta a 1993 cuando Robert Gentleman y Ross Ihaka
del Departamento de Estadística de la Universidad de Auckland adaptan el
<a href="https://en.wikipedia.org/wiki/S_(programming_language)">lenguaje de programación
S</a>, propio de
los famosos Bell Laboratories de AT&amp;T, el cual es un sistema para el
análisis de datos desarrollado por John Chambers y Rick Becker
fundamentalmente y usado desde finales de 1970 (Ross y Robert comienzan
a llamar “R” al lenguaje que implementaron, por las iniciales de sus
nombres). Es más, muchos de los libros y manuales sobre S son útiles
para R.</p>
</div>
<div id="por-qué-usar-r" class="section level3" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> ¿Por qué usar R?</h3>
<p>R tiene varias ventajas respecto a otros lenguajes de programación de
fines estadísticos o softwares dedicados. Entre otras podemos citar:</p>
<ul>
<li>Sus posibilidades gráficas son excelentes y muy versátiles. Esto
llega hasta el punto de que muchos que R tiene dos aspectos: el de
software, vamos a llamarlo, analítico y el gráfico, pudiendo incluso
independizarse su aprendizaje.</li>
<li>Cuenta con una elevada flexibilidad. Los trabajos más sencillos o
complejos algoritmos pueden ejecutarse escribiéndose una palabra.</li>
<li>No es “una caja negra” y en todo momento sabemos que estamos
haciendo. Este es un aspecto que no se valora como se debería cuando
hacemos nuestros análisis estadísticos: a costa de la facilidad de
hacer todo con un par de clicks perdemos fácilmente el control de lo
que estamos haciendo (o incluso llegamos a desconocerlo), algo que
no debería ser permitido, ya que quien hace un análisis busca una
conclusión y no saber cómo se obtiene debería invalidar por si solo
dicha conclusión.</li>
<li>En R, un análisis estadístico se realiza por pasos que arrojan
resultados que se van almacenando en objetos. De esta forma, estos
pueden recuperarse y usarse en cualquier momento.</li>
<li>Al contrario que otros software, permite salidas mínimas de
resultados, fácilmente legibles y analizables, y no una salida
copiosa de datos y gráficos.</li>
<li>Salvo que utilicemos una GUI, su aspecto es minimalista y espartano
a conciencia (hasta su web sigue esta filosofía), siguiendo la
filosofía de no perder el foco de atención de lo que estamos
haciendo con el “marco” en el que lo hacemos.</li>
<li>Es libre, con filosofía y objetivos del proyecto GNU, con lo que
podemos acceder al código escrito por otros usuarios y modificarlo
libremente y evidentemente, podemos programar nuestras propios
procedimientos y aplicaciones.</li>
<li>Es un proyecto vivo con dos millones de usuarios. Seguramente a
nuestro problema ya se habrá enfrentado alguien y casi con total
seguridad no deberemos avanzar más de “tres páginas de Google” para
encontrar la solución.</li>
<li>Existen multitud de librerías (paquetes) programadas por los
usuarios de todo el mundo para llevar a cabo procedimientos
específicos (¡más de 10.000!).</li>
<li>Y si con todo ello, no tenemos suficiente, es totalmente gratuito,
tanto el como todo su ecosistema.</li>
</ul>
</div>
<div id="recursos-sobre-r" class="section level3" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> Recursos sobre R</h3>
<p>Para aprender sobre R y estar al corriente de las últimas novedades
existen una serie de recursos que deberemos añadir a nuestros Favoritos.
Entre otros:</p>
<ul>
<li>Página oficial de R: <a href="https://www.r-project.org/" class="uri">https://www.r-project.org/</a></li>
<li>Fundación R:
<a href="https://www.r-project.org/foundation">https://www.r-project.org/foundation/</a></li>
<li>Manuales iniciales: <a href="https://cran.r-project.org/manuals.html" class="uri">https://cran.r-project.org/manuals.html</a></li>
<li>Revista R: <a href="https://journal.r-project.org/" class="uri">https://journal.r-project.org/</a></li>
<li>R-Bloggers: <a href="http://www.r-bloggers.com/" class="uri">http://www.r-bloggers.com/</a></li>
<li>Comunidad R-Hispano: <a href="http://r-es.org/Comunidad" class="uri">http://r-es.org/Comunidad</a></li>
<li>Recursos MOOC como Coursera: <a href="www.coursera.org">www.coursera.org</a></li>
<li>Bibliografía en papel: “R for Everyone: Advanced Analytics and
Graphics” (<a href="http://www.jaredlander.com/r-for-everyone/" class="uri">http://www.jaredlander.com/r-for-everyone/</a>), “R
Cookbook” (<a href="http://shop.oreilly.com/product/9780596809164.do" class="uri">http://shop.oreilly.com/product/9780596809164.do</a>) y el
clásico “Modern Applied Statistics with S”
(<a href="http://www.springer.com/us/book/9780387954578" class="uri">http://www.springer.com/us/book/9780387954578</a>)</li>
</ul>
<p>En este punto nos puede asaltar la duda ¿Markdowncubre todo el espectro
que cubre <code>HTML</code>? Sí y no, porque si no lo cubre, tan solo tienes que
escribir la parte de HTML` separado una línea del siguiente párrafo en
Markdown.</p>
<p>Trabajar con Markdown, tiene infinidad de ventajas, pero es
especialmente adecuado para aquellas personas que publican contenido en
la web de manera regular. Entre otras ventajas cabe citar que cuando te
acostumbras a la sintaxis la generación de texto es extremadamente
rápido, es muy sencillo de leer, no tendremos el problema de errores por
no cerrar adecuadamente las etiquetas <code>HTML</code> y su compilación con
software como <a href="https://pandoc.org/"><code>Pandoc</code></a> permite la exportación
simple a infinidad de formatos basados en texto.</p>
</div>
</div>
<div id="instalación-de-r-rstudio-y-librerias" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Instalación de R, RStudio y librerias</h2>
<div id="instalación-de-r" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Instalación de R</h3>
<p>R funciona bajo Windows, Linux, Mac o Solaris. Para instalar R
accederemos a su página (en este caso, un mirror de España):
<a href="http://cran.es.r-project.org/" class="uri">http://cran.es.r-project.org/</a> y descargaremos la versión adecuada a
nuestro sistema operativo.</p>
<p>En el caso de Windows, la instalación es muy sencilla y solo deberemos
seguir los pasos que se nos indica. Si todo ha ido correctamente, cuando
pulsemos sobre el icono de R, se abrirá su espartana interfaz en la que,
además de la barra de herramientas, destaca la consola donde
escribiremos y ejecutaremos nuestro código.</p>
<p>Algo bastante interesante de R es su portabilidad. R, una vez instalado
en un PC puede funcionar de forma autónoma al mismo. Por ello, una
simple copia del directorio donde lo hayamos instalado y su posterior
“pegado” en una memoria flash, nos permitirá ejecutarlo en cualquier
lugar, llevándonos así nuestra configuración personal, paquetes,
entornos y demás.</p>
</div>
</div>
<div id="actualización-de-r" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Actualización de R</h2>
<p>Cada cierto tiempo es recomendable realizar la actualización de R.
Generalmente, un par de veces al año, el sistema es actualizado, misión
que lleva a cabo un reducido grupo de especialistas (conocido como el R
Core team) y los paquetes (que en próximos capítulos explicaremos) se
adaptan a la nueva actualización, dejando, algunas veces de ser útiles
en las versiones obsoletas.</p>
<p>La actualización de R puede ser automatizada o realizarse de forma
manual si bien este último recurso no es la mejor opción debido a que se
actualizará creando una nueva instalación manteniendo la anterior. Este
echo se debe a que en la actualidad es la única forma de que no perdamos
nuestras configuraciones y, sobre todo, la posible incompatibilidad con
alguno de los paquetes que tengamos instalados.Para realizar una
actualización automática del sistema, podemos usar la siguiente
sentencia usando el paquete <span class="citation">(<a href="#ref-R-installr" role="doc-biblioref">Galili 2021</a>)</span> (despues veremos el lugar de
ejecutarla):</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="introducción-al-lenguaje-r.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(installr)) {</span>
<span id="cb1-2"><a href="introducción-al-lenguaje-r.html#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">&quot;installr&quot;</span>); <span class="fu">require</span>(installr)} </span>
<span id="cb1-3"><a href="introducción-al-lenguaje-r.html#cb1-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb1-4"><a href="introducción-al-lenguaje-r.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">updateR</span>()</span></code></pre></div>
<div id="el-sistema-r" class="section level3" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> El Sistema R</h3>
<p>Una vez instalamos R, nos encontramos con una interfaz gráfica de
usuario que nos puede resultar “anticuada” sobre todo si trabajamos con
los sistemas operativos más recientes. Este aspecto no debe confundirnos
de cuál es la visión del sistema R: un lenguaje de programación con una
clara vocación estadístico-matemática.</p>
<div class="figure">
<img src="https://egret.psychol.cam.ac.uk/statistics/R/output/R_startup.png" alt="" />
<p class="caption">R</p>
</div>
</div>
</div>
<div id="gestión-de-directorios-archivos-y-versiones" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Gestión de directorios, archivos y versiones</h2>
<div id="gestión-de-directorios" class="section level3" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Gestión de directorios</h3>
<p>Existen dos comandos básicos para trabajar con directorios: <code>setwd()</code> y
<code>getwd()</code>. El primero, fija el directorio de trabajo que deseamos y el
segundo lo llama.</p>
<p>Con el directorio fijado, podremos movernos por él, usando el comando
<code>"./data"</code> que nos haría descender a una carpeta llamada data que cuelga
de nuestro directorio raíz fijado con <code>setwd()</code>. Por otro lado, si
usamos el comando <code>"../data"</code> ascenderemos a una carpeta que esta en un
nivel superior a nuestro directorio raíz.</p>
<p>A continuación, podemos usar los comandos <code>list.files()</code> y <code>list.dirs()</code>
para poder listar los archivos y directorios respectivamente que
tengamos en el directorios elegido. Es interesante indicar que si
añadimos la opción <code>recursive=TRUE</code> los dos comandos listaran todos los
ficheros y archivos que haya tanto en nuestro directorio raiz como en
todos los inferiores. Finalmente, usando el comando <code>full.names = TRUE</code>
en vez de solo mostrarnos el nombre completo del fichero, nos mostrará
toda su ruta.</p>
<p>Ahora combinemos todo lo anterior para listar los ficheros de un
directorio:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="introducción-al-lenguaje-r.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list.files</span>(<span class="st">&quot;c:/&quot;</span>)</span>
<span id="cb2-2"><a href="introducción-al-lenguaje-r.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">list.dirs</span>(<span class="st">&quot;c:/&quot;</span>)</span></code></pre></div>
<p>Finalmente, con el comando <code>pattern =</code> podremos seleccionar determinados
ficheros o directorios que coincidan con una determinada condición. Por
ejemplo, <code>pattern = "(.*).jp2$"</code> nos mostrará todos los ficheros que
finalicen la extensión <code>jp2</code> y <code>pattern = "29SMD(.*)SCL_20(.*).jp2$"</code>
nos listará todos los ficheros que además de finalizar con <code>jp2</code>incluyan
la cadena <code>29SMD</code> y <code>SCL_20</code>.</p>
<p>Una vez tenemos claro los conceptos anteriores, podremos realizar
trabajos recursivos con nuestros ficheros y directorios (tranquilo,
comprenderás este código a lo largo de estos apuntes), por ejemplo:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="introducción-al-lenguaje-r.html#cb3-1" aria-hidden="true" tabindex="-1"></a>List <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="fu">getwd</span>(), <span class="at">full.names =</span> <span class="cn">TRUE</span>, </span>
<span id="cb3-2"><a href="introducción-al-lenguaje-r.html#cb3-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">pattern =</span> <span class="st">&quot;29SMD(.*)SCL_20(.*).jp2$&quot;</span>, </span>
<span id="cb3-3"><a href="introducción-al-lenguaje-r.html#cb3-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">recursive=</span><span class="cn">TRUE</span>) </span>
<span id="cb3-4"><a href="introducción-al-lenguaje-r.html#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (file <span class="cf">in</span> List) { </span>
<span id="cb3-5"><a href="introducción-al-lenguaje-r.html#cb3-5" aria-hidden="true" tabindex="-1"></a>  out_file <span class="ot">&lt;-</span> <span class="fu">extension</span>(file, <span class="st">&#39;tif&#39;</span>) </span>
<span id="cb3-6"><a href="introducción-al-lenguaje-r.html#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gdal_translate</span>(<span class="at">src_dataset =</span> file, <span class="at">dst_dataset =</span> out_file, </span>
<span id="cb3-7"><a href="introducción-al-lenguaje-r.html#cb3-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">ot =</span> <span class="st">&quot;UInt16&quot;</span>, <span class="at">of =</span> <span class="st">&quot;GTiff&quot;</span>) </span>
<span id="cb3-8"><a href="introducción-al-lenguaje-r.html#cb3-8" aria-hidden="true" tabindex="-1"></a>} </span></code></pre></div>
</div>
<div id="manejo-de-archivos" class="section level3" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> Manejo de archivos</h3>
<p>Cuando cargamos un fichero externo, sea del formato que sea, R, por
defecto lo interpretará como un <code>data.frame</code> (ver <a href="#dataframe"><strong>??</strong></a>), si
este viene en un formato usual de tabla.</p>
<p>R puede cargar multitud de ficheros distintos y si no lo hace con las
opciones incluidas en ´{base}´ lo hará a traves de librerias. Veamos a
continuación los más frecuentes.</p>
<div id="ficheros-csv" class="section level4" number="2.4.2.1">
<h4><span class="header-section-number">2.4.2.1</span> Ficheros csv</h4>
<p>Los ficheros delimitados por comas se cargan con el comando <code>read.csv</code>
indicando al menos la ruta del mismo, si viene o no con cabeceras, el
separador decimal y el separador de colummas:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="introducción-al-lenguaje-r.html#cb4-1" aria-hidden="true" tabindex="-1"></a>datos<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;./datos.csv&quot;</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">dec=</span> <span class="st">&quot;.&quot;</span>, <span class="at">sep=</span><span class="st">&quot;,&quot;</span>)</span></code></pre></div>
<p>En el caso de no indicar, <code>header</code>, <code>dec</code> y/o <code>sep</code>, el comando
<code>read.csv</code> importará el fichero con el primer registro como cabeceras,
el separador decimal en forma de <code>.</code> y el separador de columnas <code>,</code>.</p>
<p>En ocasiones, nuestro fichero puede venir sin cabeceras por lo que
deberemos importarlo indicando este echo y R se encargará de crearlas y
nombrarlas automaticamente:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="introducción-al-lenguaje-r.html#cb5-1" aria-hidden="true" tabindex="-1"></a>datos<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;./datos2.csv&quot;</span>, <span class="at">header=</span><span class="cn">FALSE</span>, <span class="at">dec=</span> <span class="st">&quot;.&quot;</span>)</span></code></pre></div>
<p>En este último caso, si deseamos que en vez de los nombres de cabecera
que crea R, tener unos personalizados, deberemos decírselo al realizar
la importación:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="introducción-al-lenguaje-r.html#cb6-1" aria-hidden="true" tabindex="-1"></a>datos<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;./datos2.csv&quot;</span>, <span class="at">header=</span><span class="cn">FALSE</span>, </span>
<span id="cb6-2"><a href="introducción-al-lenguaje-r.html#cb6-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">dec=</span> <span class="st">&quot;.&quot;</span>, <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;factor&quot;</span>, <span class="st">&quot;volumen&quot;</span>))</span></code></pre></div>
<p>Para finalizar, nuestros ficheros pueden venir con valores nulos. Si los
conocemos, deberemos indicarselo al comando <code>read.csv</code> mediante
<code>strings.na</code>. Por ejemplo (todos los valores que en el fichero vengan
con <code>N/A</code> los entederá como un valor nulo):</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="introducción-al-lenguaje-r.html#cb7-1" aria-hidden="true" tabindex="-1"></a>datos<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;./datos3.csv&quot;</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">strings.na=</span> <span class="st">&quot;N/A&quot;</span>)</span></code></pre></div>
<p>Un añadido: en ocasiones los ficheros comienzan con líneas explicativas
que no sirven para nada en el contexto de datos tabulares. Para saltar
estas lineas podemos usar el comando <code>skip=</code> dentro de <code>read.csv()</code>.</p>
</div>
</div>
<div id="carga-de-datos-usando-el-buscador" class="section level3" number="2.4.3">
<h3><span class="header-section-number">2.4.3</span> Carga de datos usando el buscador</h3>
<p>En ocasiones, sobre todo si nuestro código lo compartimos con otros, es
conveniente dejar la forma de entrada de nuestros datos a libre elección
y que se localicen con el buscador del sistema. Para ello, haremos uso
de la función <code>file.choose()</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="introducción-al-lenguaje-r.html#cb8-1" aria-hidden="true" tabindex="-1"></a>filename <span class="ot">&lt;-</span> <span class="fu">file.choose</span>()</span>
<span id="cb8-2"><a href="introducción-al-lenguaje-r.html#cb8-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(filename, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">dec=</span> <span class="st">&quot;.&quot;</span>, <span class="at">sep=</span><span class="st">&quot;,&quot;</span>)</span></code></pre></div>
<div id="carga-de-datos-desde-una-ruta-web" class="section level4" number="2.4.3.1">
<h4><span class="header-section-number">2.4.3.1</span> Carga de datos desde una ruta web</h4>
<p>Generalmente nuestros ficheros estarán alojados en nuestro PC, pero en
la actualidad, cada vez es más frecuente que los mismos estén alojados
en un servidor de la web. La carga de estos no difiere en nada de la
carga de un fichero ubicado en nuestro local. Para ello, en vez de una
ruta de carpetas de nuestra computadora, pondremos la url donde se aloje
el fichero y nos ayudaremos de la librería <code>RCurl</code> <span class="citation">(<a href="#ref-R-RCurl" role="doc-biblioref">Temple Lang 2021a</a>)</span> que
facilita el trabajo de lectura y descarga:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="introducción-al-lenguaje-r.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RCurl)</span>
<span id="cb9-2"><a href="introducción-al-lenguaje-r.html#cb9-2" aria-hidden="true" tabindex="-1"></a>datos_online <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(</span>
<span id="cb9-3"><a href="introducción-al-lenguaje-r.html#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">text=</span><span class="fu">getURL</span>(<span class="st">&quot;https://raw.githubusercontent.com/juliomsevilla/rlidar/main/data/parc.csv&quot;</span>), </span>
<span id="cb9-4"><a href="introducción-al-lenguaje-r.html#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">header=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p>En ocasiones la librería <code>RCurl</code> <span class="citation">(<a href="#ref-R-RCurl" role="doc-biblioref">Temple Lang 2021a</a>)</span> falla (en Windows
especialmente y/o si estamos antes de un proxy), por lo que podemos
optar a la opción sencilla de descargar el fichero directamente:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="introducción-al-lenguaje-r.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">&quot;https://raw.githubusercontent.com/juliomsevilla/rlidar/main/data/parc.csv&quot;</span>, </span>
<span id="cb10-2"><a href="introducción-al-lenguaje-r.html#cb10-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">destfile =</span> <span class="st">&quot;c:/temp/test.csv&quot;</span>, <span class="at">method =</span> <span class="st">&quot;curl&quot;</span>)</span></code></pre></div>
</div>
<div id="scrapping" class="section level4" number="2.4.3.2">
<h4><span class="header-section-number">2.4.3.2</span> Scrapping</h4>
<p>Una rutina bastante usual es descargar datos desde una web (a diferencia
del anterior, no es un fichero alojado en una servidor). A este
procedimiento se le denomina <em>scrapping</em> y usualmente deberemos
comprender ficheros del tipo <code>xml</code>o <code>json</code> (comprender, ya que no son
estructuras rígidas como puede ser una “tabla” de un <code>csv</code>).</p>
<p>En el caso de <code>xml</code> nos apoyaremos en la libreria <code>XML</code> <span class="citation">(<a href="#ref-R-XML" role="doc-biblioref">Temple Lang 2021b</a>)</span> el
procedimiento consistirá en cargar la ruta en la que se aloja dicho
elemento y a continuación indicarle a <code>R</code> cual es el nodo raíz para
finalmente ver que datos hay encerrados entre las etiquetas <code>&lt;&gt;</code>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="introducción-al-lenguaje-r.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(XML)</span>
<span id="cb11-2"><a href="introducción-al-lenguaje-r.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RCurl)</span>
<span id="cb11-3"><a href="introducción-al-lenguaje-r.html#cb11-3" aria-hidden="true" tabindex="-1"></a>url<span class="ot">&lt;-</span><span class="fu">getURL</span>(<span class="st">&quot;https://raw.githubusercontent.com/juliomsevilla/rlidar/main/data/test.xml&quot;</span>)</span>
<span id="cb11-4"><a href="introducción-al-lenguaje-r.html#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="introducción-al-lenguaje-r.html#cb11-5" aria-hidden="true" tabindex="-1"></a>xmldoc<span class="ot">&lt;-</span><span class="fu">xmlParse</span>(url)</span>
<span id="cb11-6"><a href="introducción-al-lenguaje-r.html#cb11-6" aria-hidden="true" tabindex="-1"></a>rootnode<span class="ot">&lt;-</span><span class="fu">xmlRoot</span>(xmldoc)</span>
<span id="cb11-7"><a href="introducción-al-lenguaje-r.html#cb11-7" aria-hidden="true" tabindex="-1"></a>rootnode[<span class="dv">1</span>] <span class="co">#De esta forma podremos ver el registro número 1</span></span>
<span id="cb11-8"><a href="introducción-al-lenguaje-r.html#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="introducción-al-lenguaje-r.html#cb11-9" aria-hidden="true" tabindex="-1"></a>datos_raw<span class="ot">&lt;-</span><span class="fu">xmlSApply</span>(rootnode, <span class="cf">function</span>(x) <span class="fu">xmlSApply</span>(x, xmlValue)) <span class="co">#Carga los datos fila a fila</span></span>
<span id="cb11-10"><a href="introducción-al-lenguaje-r.html#cb11-10" aria-hidden="true" tabindex="-1"></a>datos<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="fu">t</span>(datos_raw), <span class="at">row.names =</span><span class="cn">NULL</span>) <span class="co">#Hacemos una transposición para aplicar correctamente las etiquetas como cabeceras</span></span></code></pre></div>
<p>Como sabemos <code>HTML</code> no deja de ser una formulación especial de <code>xml</code> y,
por tanto, podremos usar lo anterior para extraer información de una
web, web, hecha con lenguaje <code>HTML</code></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="introducción-al-lenguaje-r.html#cb12-1" aria-hidden="true" tabindex="-1"></a>url<span class="ot">&lt;-</span><span class="fu">getURL</span>(<span class="st">&quot;https://raw.githubusercontent.com/juliomsevilla/rlidar/main/data/poblacion.html&quot;</span>)</span>
<span id="cb12-2"><a href="introducción-al-lenguaje-r.html#cb12-2" aria-hidden="true" tabindex="-1"></a>tables<span class="ot">&lt;-</span><span class="fu">readHTMLTable</span>(url) <span class="co">#Nos extrae todas las tablas que hay en el fichero HTML</span></span>
<span id="cb12-3"><a href="introducción-al-lenguaje-r.html#cb12-3" aria-hidden="true" tabindex="-1"></a>tabla1<span class="ot">&lt;-</span>tables[[<span class="dv">3</span>]] <span class="co">#Extraerá la tabla 6 y se usan dos corchetes porque se busca en una lista de listas</span></span>
<span id="cb12-4"><a href="introducción-al-lenguaje-r.html#cb12-4" aria-hidden="true" tabindex="-1"></a>tabla2<span class="ot">&lt;-</span><span class="fu">readHTMLTable</span>(url, <span class="at">which=</span><span class="dv">3</span>) <span class="co">#Idem al anterior pero no cargamos en local toda la web, ahorrando memoria</span></span></code></pre></div>
<p>Ahora hablemos de los ficheros <code>json</code> ficheros mucho más comunes para
compartir datos y más eficientes en este sentido que <code>xml</code>. la librería
que nos facilita el trabajo es <code>jsonlite</code> <span class="citation">(<a href="#ref-R-jsonlite" role="doc-biblioref">Ooms 2020</a>)</span></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="introducción-al-lenguaje-r.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb13-2"><a href="introducción-al-lenguaje-r.html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RCurl)</span>
<span id="cb13-3"><a href="introducción-al-lenguaje-r.html#cb13-3" aria-hidden="true" tabindex="-1"></a>url<span class="ot">&lt;-</span><span class="st">&quot;https://raw.githubusercontent.com/juliomsevilla/rlidar/main/data/currencies.json&quot;</span></span>
<span id="cb13-4"><a href="introducción-al-lenguaje-r.html#cb13-4" aria-hidden="true" tabindex="-1"></a>currencies<span class="ot">&lt;-</span><span class="fu">fromJSON</span>(url)</span></code></pre></div>
<p>Si analizamos la estructura del fichero <code>json</code>veremos que como en el
caso de <code>xml</code>es un conjunto de tados anidadados en etiquetas. Para poder
extraer solo lo que nos interesa, podemos hacer uso del simbolo <code>$</code> y
crearnos un solo objeto con los datos que nos interese (es bastante util
ir recorriendo la estructura según nos propone el predictor de <code>RStudio</code>
a medida que vamos poniendo el símbolo <code>$</code>)</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="introducción-al-lenguaje-r.html#cb14-1" aria-hidden="true" tabindex="-1"></a>datos<span class="ot">&lt;-</span>currencies<span class="sc">$</span>list<span class="sc">$</span>resources<span class="sc">$</span>resource<span class="sc">$</span>fields</span></code></pre></div>
</div>
<div id="el-fichero-rdata" class="section level4" number="2.4.3.3">
<h4><span class="header-section-number">2.4.3.3</span> El fichero Rdata</h4>
<p><code>R</code> por defecto trabaja con un sistema de archivos propio, denominado
con la extensión <code>*.Rdata</code>. Estos ficheros conservará todos los
elementos tal y como los tengamos en la memoria una vez lo creemos, por
lo que resultan bastante útiles para compartir ciertos elementos de
nuestras sesiones que hayamos trabajado.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="introducción-al-lenguaje-r.html#cb15-1" aria-hidden="true" tabindex="-1"></a>cliente<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;Pepe&quot;</span>, <span class="st">&quot;Juan&quot;</span>, <span class="st">&quot;Julio&quot;</span>)</span>
<span id="cb15-2"><a href="introducción-al-lenguaje-r.html#cb15-2" aria-hidden="true" tabindex="-1"></a>fecha<span class="ot">&lt;-</span><span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">&quot;2018/1/14&quot;</span>, <span class="st">&quot;2018/12/26&quot;</span>, <span class="st">&quot;2018/11/15&quot;</span>))</span>
<span id="cb15-3"><a href="introducción-al-lenguaje-r.html#cb15-3" aria-hidden="true" tabindex="-1"></a>cantidad<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="fl">11.1</span>, <span class="fl">16.18</span>, <span class="fl">26.25</span>)</span>
<span id="cb15-4"><a href="introducción-al-lenguaje-r.html#cb15-4" aria-hidden="true" tabindex="-1"></a>datos<span class="ot">&lt;-</span><span class="fu">data.frame</span>(cliente, fecha, cantidad)</span>
<span id="cb15-5"><a href="introducción-al-lenguaje-r.html#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(datos, currencies, <span class="at">file =</span> <span class="st">&quot;c:/Borrar/clientes.Rdata&quot;</span>)</span>
<span id="cb15-6"><a href="introducción-al-lenguaje-r.html#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;c:/Borrar/clientes.Rdata&quot;</span>)</span></code></pre></div>
<p>Existe otro formato de fichero en R, denominado <code>rds</code> que difiere del
anterior en que este no almacena el nombre del objeto, por lo que cuando
lo carguemos deberemos asignarle el nombre que queramos tener en nuestra
sesión y, y esto es lo más importante, solo es capaz de guardar un solo
objeto. Para guardar o cargar este fichero, usaremos los comandos
<code>loadRDS</code> y <code>saveRDS</code> (en este último caso, guardando con la extensión
<code>*.rds</code>).</p>
<p>Finalmente, dentro de <code>R</code> podemos usar un comando muy interesante:
<code>save.image(file="")</code> el cual nos permite guardar en un fichero <code>Rdata</code>
toda nuestra sesión, permitiéndonos así hacer portable nuestro trabajo.</p>
</div>
</div>
<div id="limpieza-de-la-memoria-en-r" class="section level3" number="2.4.4">
<h3><span class="header-section-number">2.4.4</span> Limpieza de la memoria en <code>R</code></h3>
<p>A medida que vayamos trabajando en nuestro análisis, la memoria del
sistema se irá llenando pudiendo llegar a abortar la sesión (depende la
memoria RAM de nuestra computadora). Por ello, es recomendable ir
eliminando aquellos objetos que no vayamos a utilizar nuevamente con el
comando <code>rm</code>:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="introducción-al-lenguaje-r.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(datos, tabla1) <span class="co">#Elimina el objeto datos y tabla1</span></span>
<span id="cb16-2"><a href="introducción-al-lenguaje-r.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">setdiff</span>(<span class="fu">ls</span>(), <span class="fu">c</span>(<span class="st">&quot;cantidad&quot;</span>, <span class="st">&quot;cliente&quot;</span>))) <span class="co">#Elimina todos los objetos de la memoria menos</span></span>
<span id="cb16-3"><a href="introducción-al-lenguaje-r.html#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>()) <span class="co">#Elimina todos los elementos de la memoria</span></span>
<span id="cb16-4"><a href="introducción-al-lenguaje-r.html#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="fu">.rs.restartR</span>() <span class="co">#Reinicia la sesión de R, eliminando cualquier resto que pudiera quedar</span></span></code></pre></div>
</div>
<div id="control-de-versiones" class="section level3" number="2.4.5">
<h3><span class="header-section-number">2.4.5</span> Control de versiones</h3>
<p>Para comenzar necesitaremos contar con el software Git en nuestro pc.
Podemos hacerlo de dos formas: descargandolo e instalando la versión de
nuestro sistema operativo o usando una versión portable. Desde aquí
recomendamos
<a href="Smartgit%20portable">https://www.syntevo.com/smartgit/download/</a>, bien
para usarlo o solo para utilizar el git portable.</p>
<p>Una vez lo descomprimes vamos a RStudio y en Tools&gt;Global
Options&gt;Git/SVN se le indica donde está git.exe, que está dentro de la
instalación de git portable en la carpeta bin (generalmente en
/git/bin/git.exe).</p>
<p>A continuación abrimos el shell de git (/git/git-cmd.exe) y pondremos
los siguientes comandos sustituyendo con nuestros datos lo que viene
dentro de las comillas.</p>
<p><code>git config --global user.name 'Your Name'</code></p>
<p><code>git config --global user.email 'your@email.com'</code></p>
<p>Crear un proyecto control de versiones es muy sencillo: creamos el
proyecto habilitando el sistema de versioneado (checkbox “Create a git
repository” dentro de File&gt;New Directory&gt;New Project). Para clonar un
repositorio creamos un nuevo proyecto y le decimos que este sea con
control de versiones (File&gt;Version Control) y ahí podremos introducir
la dirección http del repositorio. También tendremos que indicarle donde
lo guardaremos. Despues de ello, RStudio añadirá un botón, en la barra
de herramientas principal, para gestionar el control de versiones
(simbolizado con las letras GIT).</p>
<p>Trabajar con un sistema de control de versiones daría para un libro
completo sobre el tema por lo que no vamos a profundizar. Básicamente,
nuestro trabajo se basará en realizar commits cada vez que deseemos
fijar una foto de nuestros cambios y ejecutar pull/push de nuestros
repositorios cuando queramos traernos los cambios a local o subirlos al
servidor respectivamente. Indicar que en estas dos acciones, se abrirá
un diálogo que nos solicita nuestro usuario y contraseña. Para
profundizar en el tema es muy recomendable visitar el manual de Jenny
Bryan <a href="http://happygitwithr.com/">Happy Git and GitHub for the useR</a> y
el video oficial de RStudio dentro de la serie <a href="https://www.rstudio.com/resources/webinars/rstudio-essentials-webinar-series-managing-part-2/">RStudio
Essentials</a></p>
</div>
<div id="buenas-prácticas-en-la-gestión-de-un-proyecto" class="section level3" number="2.4.6">
<h3><span class="header-section-number">2.4.6</span> Buenas prácticas en la gestión de un proyecto</h3>
<p>Con frecuencia nos veremos envueltos en la gestión de proyectos de
envergadura donde se mezclarán ficheros de datos creados y externos,
scripts, elementos de consulta, documentación e incluso información
temporal. Por ello, es recomendable ser disciplinado y crear una
estructura de directorios adecuada.</p>
<p>A continuación se dan unas ideas, adecuables a cada situación:</p>
<ol style="list-style-type: decimal">
<li><p>Tratar los datos originales como de sólo lectura</p></li>
<li><p>Limpiar los datos previamente, incluso fuera de R</p></li>
<li><p>Usar herramientas de control de versiones como <code>Git</code> o <code>SVN</code></p></li>
<li><p>Empezar siempre nuestra sesión definiendo el directorio de trabajo y
que este sea fijo</p></li>
<li><p>Siempre trabajar con la misma estructura de directorios, aunque
tengamos carpetas vacias. Por ejemplo, dentro de del directorio raíz
de nuestro proyecto (cada proyecto contará con uno), crear las
siguientes carpetas:</p>
<ul>
<li>bin: para guardar todos aquellos elementos accesorios para poder
realizar los análisis (scripts de otros lenguajes, por ejemplo)</li>
<li>data: donde almacenaremos todos los datos de inicio,
metadata,…</li>
<li>doc: para poder guardar toda la documentación generada como
wikis o manuales</li>
<li>results: para guardar los datos limpios de nuestro análisis y
los resultados</li>
<li>src: para almacenaje de scripts creados</li>
<li>temp: para almacenar los archivos temporales y prescindibles</li>
</ul></li>
<li><p>Escribir código legible y que este sea lo más pequeño posible (“un
elefante nos lo podemos comer a pequeños bocados”)</p></li>
<li><p>Siempre documentar tu proyecto, hasta lo más simple</p></li>
</ol>
</div>
</div>
<div id="manejo-de-objetos-en-r" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Manejo de objetos en R</h2>
<div id="r-como-calculadora" class="section level3" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> R como calculadora</h3>
<p>R es una potente calculadora pero quizás sea para lo que menos se usa.
Su utilización es tan simple como escribir lo que queremos realizar
(hagamos nuestro “Hello, World” sumando 1+1:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="introducción-al-lenguaje-r.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">+</span><span class="dv">1</span></span></code></pre></div>
<pre><code>## [1] 2</code></pre>
</div>
<div id="manejo-de-variables" class="section level3" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> Manejo de variables</h3>
<p>Las variables, entendidas en R como en cualquier lenguaje de
programación, son el núcleo sobre el que gira todo el sistema, si bien
en este sistema se denominan objetos. Estas se asignan con los
operadores <code>&lt;-</code> o <code>=</code> y con la función <code>assing()</code>, prefieriéndose el
primero.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="introducción-al-lenguaje-r.html#cb19-1" aria-hidden="true" tabindex="-1"></a>a<span class="ot">&lt;-</span><span class="dv">1</span></span>
<span id="cb19-2"><a href="introducción-al-lenguaje-r.html#cb19-2" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb19-3"><a href="introducción-al-lenguaje-r.html#cb19-3" aria-hidden="true" tabindex="-1"></a>b<span class="ot">=</span><span class="dv">2</span></span>
<span id="cb19-4"><a href="introducción-al-lenguaje-r.html#cb19-4" aria-hidden="true" tabindex="-1"></a>b</span>
<span id="cb19-5"><a href="introducción-al-lenguaje-r.html#cb19-5" aria-hidden="true" tabindex="-1"></a>c<span class="ot">&lt;-</span>d<span class="ot">&lt;-</span><span class="dv">3</span></span>
<span id="cb19-6"><a href="introducción-al-lenguaje-r.html#cb19-6" aria-hidden="true" tabindex="-1"></a>c</span>
<span id="cb19-7"><a href="introducción-al-lenguaje-r.html#cb19-7" aria-hidden="true" tabindex="-1"></a>d</span>
<span id="cb19-8"><a href="introducción-al-lenguaje-r.html#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="fu">assign</span>(<span class="st">&quot;e&quot;</span>, <span class="dv">13</span>)</span>
<span id="cb19-9"><a href="introducción-al-lenguaje-r.html#cb19-9" aria-hidden="true" tabindex="-1"></a>e</span>
<span id="cb19-10"><a href="introducción-al-lenguaje-r.html#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="ot">-&gt;</span>f</span>
<span id="cb19-11"><a href="introducción-al-lenguaje-r.html#cb19-11" aria-hidden="true" tabindex="-1"></a>f</span></code></pre></div>
<p>Todas los objetos en R se realizan con objetos que son guardados en la
memoria activa del ordenador, sin usar archivos temporales, por lo que
deberemos tener muy en cuenta la RAM de nuestra máquina.</p>
<p>Es importante destacar que si un objeto existe con una valor, si le
asignamos otros, el primero cambia irremediablente:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="introducción-al-lenguaje-r.html#cb20-1" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb20-2"><a href="introducción-al-lenguaje-r.html#cb20-2" aria-hidden="true" tabindex="-1"></a>a<span class="ot">&lt;-</span><span class="dv">45</span></span>
<span id="cb20-3"><a href="introducción-al-lenguaje-r.html#cb20-3" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<p>Por otro lado, el valor asignado a un objeto puede ser el resultado de
una operacion y/o de una función:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="introducción-al-lenguaje-r.html#cb21-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">5</span> <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">1</span>)</span></code></pre></div>
<p>En ocasiones, y para abreviar, podremos encontrarnos con comandos en una
sola línea: si estos están separados con <code>;</code> se ejecutarán de forma
independiente:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="introducción-al-lenguaje-r.html#cb22-1" aria-hidden="true" tabindex="-1"></a>a<span class="ot">&lt;-</span><span class="dv">1</span>; b<span class="ot">&lt;-</span><span class="dv">2</span>; a; b</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<pre><code>## [1] 2</code></pre>
<p>A veces podremos querer listar los objetos que existen en memoria, para
lo cual usaremos <code>ls()</code>:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="introducción-al-lenguaje-r.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot;</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="introducción-al-lenguaje-r.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>(<span class="at">pat =</span> <span class="st">&quot;m&quot;</span>) <span class="co"># Lista aquellos objetos que contengan una m</span></span></code></pre></div>
<pre><code>## character(0)</code></pre>
</div>
</div>
<div id="manejo-de-datos-en-r" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> Manejo de datos en R</h2>
<div id="tipos-de-datos" class="section level3" number="2.6.1">
<h3><span class="header-section-number">2.6.1</span> Tipos de datos</h3>
<p>El dato en R es un concepto distinto al que estamos acostumbrados a
tratar en Estadística Aplicada y se debe entender como el resultado de
ejecutar una determinada expresión, es decir, es un objeto.</p>
<p>En otros, los tipos de datos (objetos) fundamentales de R son:</p>
<ul>
<li>Vectores. Conjunto de elementos en un determinado orden.</li>
<li>Factores. Vector donde sus elementos provienen de un número finito
de categorías.</li>
<li>Matrices. Estructura de datos bidimensional de valores de igual tipo</li>
<li>Listas. Estructura de datos más amplia que y puede contener
colecciones arbitrarias de datos</li>
<li>data.frame. Estructura de datos bidimensional de elementos, cuyas
columnas pueden estar formadas por elementos de distinto tipo</li>
</ul>
<p>Como vemos unos se diferencian de otros en función de los tipos de
elementos que contienen. Estos elementos poseen distintos atributos,
pero de ellos, para nuestros propósitos hemos de destacar el modo. En
concreto, en R, distinguimos cuatro modos:</p>
<ul>
<li>Lógico o modo binario, verdadero o falso (T o F, respectivamente)</li>
<li>Númerico, donde los valores posibles son números reales</li>
<li>Complejo, donde los valores posibles son números complejos</li>
<li>Carácter, donde los valores son caracteres (separados por comillas)</li>
<li>Fechas, definidas en formato “2015-06-25” o “2015-06-25 15:15”</li>
</ul>
<div id="vectores" class="section level4" number="2.6.1.1">
<h4><span class="header-section-number">2.6.1.1</span> Vectores</h4>
<p>Es uno de los tipos de datos más utilizados. Como regla ineludible es
que sus elementos sean del mismo modo.</p>
<p>Su creación se realiza a través de la función <code>c</code> (del inglés
<em>concatenate</em>), siguiendo la siguiente estructura:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="introducción-al-lenguaje-r.html#cb29-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">118</span>, <span class="dv">160</span>, <span class="dv">64</span>, <span class="dv">138</span>, <span class="dv">168</span>, <span class="dv">140</span>, <span class="dv">109</span>, <span class="dv">135</span>, <span class="dv">220</span>, <span class="dv">180</span>, <span class="dv">151</span>, <span class="dv">129</span>, <span class="dv">117</span>, <span class="dv">121</span>, <span class="dv">86</span>, <span class="dv">170</span>, <span class="dv">62</span>, <span class="dv">104</span>, <span class="dv">184</span>)</span>
<span id="cb29-2"><a href="introducción-al-lenguaje-r.html#cb29-2" aria-hidden="true" tabindex="-1"></a>z<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)</span>
<span id="cb29-3"><a href="introducción-al-lenguaje-r.html#cb29-3" aria-hidden="true" tabindex="-1"></a>w<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">5</span><span class="sc">:-</span><span class="dv">7</span>)</span>
<span id="cb29-4"><a href="introducción-al-lenguaje-r.html#cb29-4" aria-hidden="true" tabindex="-1"></a>w</span></code></pre></div>
<pre><code>##  [1]  5  4  3  2  1  0 -1 -2 -3 -4 -5 -6 -7</code></pre>
<p>El trabajo con objetos de R tiene grandes ventajas. Una de ellas es el
crear datos a partir de otros o ejecutar operaciones con ellos.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="introducción-al-lenguaje-r.html#cb31-1" aria-hidden="true" tabindex="-1"></a>x1<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">118</span>, <span class="dv">160</span>, <span class="dv">64</span>, <span class="dv">138</span>, <span class="dv">168</span>)</span>
<span id="cb31-2"><a href="introducción-al-lenguaje-r.html#cb31-2" aria-hidden="true" tabindex="-1"></a>x2<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">140</span>, <span class="dv">109</span>, <span class="dv">135</span>, <span class="dv">220</span>, <span class="dv">180</span>)</span>
<span id="cb31-3"><a href="introducción-al-lenguaje-r.html#cb31-3" aria-hidden="true" tabindex="-1"></a>x3<span class="ot">&lt;-</span><span class="fu">c</span>(x1, <span class="dv">140</span>, <span class="dv">109</span>, <span class="dv">135</span>, <span class="dv">220</span>, <span class="dv">180</span>, <span class="dv">151</span>, <span class="dv">129</span>, <span class="dv">117</span>, <span class="dv">121</span>, <span class="dv">86</span>, <span class="dv">170</span>, <span class="dv">62</span>, <span class="dv">104</span>, <span class="dv">184</span>)</span>
<span id="cb31-4"><a href="introducción-al-lenguaje-r.html#cb31-4" aria-hidden="true" tabindex="-1"></a>x1<span class="sc">*</span>x2</span></code></pre></div>
<pre><code>## [1] 16520 17440  8640 30360 30240</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="introducción-al-lenguaje-r.html#cb33-1" aria-hidden="true" tabindex="-1"></a>(x1<span class="sc">^</span><span class="dv">2</span>)<span class="sc">/</span>(x2)</span></code></pre></div>
<pre><code>## [1]  99.45714 234.86239  30.34074  86.56364 156.80000</code></pre>
<p>Si, deseamos saber las características del vector creado, podemos usar
funciones como las siguientes:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="introducción-al-lenguaje-r.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="introducción-al-lenguaje-r.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(x)</span></code></pre></div>
<pre><code>## [1] 19</code></pre>
<p>Otras funciones útiles son las que se enumeran a continuación:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="introducción-al-lenguaje-r.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(x) <span class="co">#Pregunta si es numérico</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="introducción-al-lenguaje-r.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x) <span class="co">#Indica el tipo de valor</span></span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="introducción-al-lenguaje-r.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(z) <span class="co"># Cuenta el número de caracteres</span></span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</code></pre>
</div>
<div id="factores" class="section level4" number="2.6.1.2">
<h4><span class="header-section-number">2.6.1.2</span> Factores</h4>
<p>Los factores son uno de los tipos de datos más importantes en
Estadística Aplicada. Su definición en R es muy sencilla y se hace con
la instrucción siguiente (nos apoyaremos en el vector z, anteriormente
creado):</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="introducción-al-lenguaje-r.html#cb45-1" aria-hidden="true" tabindex="-1"></a>f<span class="ot">&lt;-</span><span class="fu">as.factor</span>(z)</span></code></pre></div>
<p>Existen comandos asociados a los factores bastante útiles. De ellos
destaca <code>levels</code>, que nos indica los niveles del factor:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="introducción-al-lenguaje-r.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(f)</span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
</div>
</div>
<div id="valores-perdidos-y-nulos" class="section level3" number="2.6.2">
<h3><span class="header-section-number">2.6.2</span> Valores perdidos y nulos</h3>
<p>El tratamiento de estos tipos de valores es muy simple en R. Los valores
perdidos se definen como <code>NA</code> y a diferencia de un valor nulo,<code>NULL</code>,
implica la existencia de valor. Esto se puede ver fácilmente con el
siguiente comando:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="introducción-al-lenguaje-r.html#cb48-1" aria-hidden="true" tabindex="-1"></a>s<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb48-2"><a href="introducción-al-lenguaje-r.html#cb48-2" aria-hidden="true" tabindex="-1"></a>r<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NULL</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb48-3"><a href="introducción-al-lenguaje-r.html#cb48-3" aria-hidden="true" tabindex="-1"></a>s</span></code></pre></div>
<pre><code>## [1]  1 NA  3  4</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="introducción-al-lenguaje-r.html#cb50-1" aria-hidden="true" tabindex="-1"></a>r</span></code></pre></div>
<pre><code>## [1] 1 3 4</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="introducción-al-lenguaje-r.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(s)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="introducción-al-lenguaje-r.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(r)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Si contamos con valores perdidos, es de vital importancia no tratarlos
en nuestros análisis. Para ello, usaremos el comando <code>na.rm=T</code>:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="introducción-al-lenguaje-r.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(s)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="introducción-al-lenguaje-r.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(s, <span class="at">na.rm=</span>T)</span></code></pre></div>
<pre><code>## [1] 2.666667</code></pre>
<p>Para finalizar, en R, hemos de evitar confundir <code>NA</code> con <code>NaN</code>. Mientras
el primero, como hemops indicado responde a la inexitencia de valor, el
segundo representa las siglas “Not a Number,” siendo arrojado por el
porgrama cuando el resultado de un determinado cálculo así lo sea.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="introducción-al-lenguaje-r.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="sc">-</span><span class="dv">23</span>)</span></code></pre></div>
<pre><code>## Warning in sqrt(-23): Se han producido NaNs</code></pre>
<pre><code>## [1] NaN</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="introducción-al-lenguaje-r.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span><span class="sc">/</span><span class="dv">0</span></span></code></pre></div>
<pre><code>## [1] NaN</code></pre>
<div id="gestión-de-valores-na" class="section level4" number="2.6.2.1">
<h4><span class="header-section-number">2.6.2.1</span> Gestión de valores <code>NA</code></h4>
<p>Cuando cargamos un fichero de datos que contiene datos vacios, podremos
transformarlos a <code>NA</code> usando el comando <code>na.strings=""</code> poniendo dentro
de las comillas el valor que represente ese dato vacio (si efectivamente
el vacio lo es, lo podremos indicar no poniendo nada dentro de estas
comillas).</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="introducción-al-lenguaje-r.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">&quot;https://raw.githubusercontent.com/juliomsevilla/rlidar/main/data/parcna.txt&quot;</span>,</span>
<span id="cb65-2"><a href="introducción-al-lenguaje-r.html#cb65-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">destfile =</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;</span><span class="sc">\\</span><span class="st">parcna.txt&quot;</span>, <span class="at">sep=</span><span class="st">&quot;&quot;</span>), </span>
<span id="cb65-3"><a href="introducción-al-lenguaje-r.html#cb65-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">method =</span> <span class="st">&quot;curl&quot;</span>, <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb65-4"><a href="introducción-al-lenguaje-r.html#cb65-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-5"><a href="introducción-al-lenguaje-r.html#cb65-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;</span><span class="sc">\\</span><span class="st">parcna.txt&quot;</span>, <span class="at">sep=</span><span class="st">&quot;&quot;</span>), <span class="at">na.strings=</span><span class="st">&quot;na&quot;</span>, <span class="at">header=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p>En ocasiones podríamos querer despreciar esos casos que contienen
valores <code>NA</code>: lo haremos facilmente con la sentencia <code>na.omit()</code>.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="introducción-al-lenguaje-r.html#cb66-1" aria-hidden="true" tabindex="-1"></a>data_clean<span class="ot">&lt;-</span><span class="fu">na.omit</span>(data) <span class="co">#Observemos que se ha reducido el número de registros respecto al objeto data</span></span></code></pre></div>
<p>Hagamos algo más complejo: quedemosnos con aquellos registros donde no
existan <code>NA</code> en un determinado campo <code>myfield</code> (usaremos <code>!</code> que es el
indicador de negación, el concepto <code>is.na</code> y los corchetes para
señalizar filas y/o columnas).</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="introducción-al-lenguaje-r.html#cb67-1" aria-hidden="true" tabindex="-1"></a>new_data<span class="ot">&lt;-</span>data[<span class="sc">!</span><span class="fu">is.na</span>(data<span class="sc">$</span>COMARCA),]</span></code></pre></div>
<p>Parecido a lo anterior, si quisieramos quedarnos solo con los registros
completos, es decir, con solo aquellos que no tienen <code>NA</code>en ninguna
columna, podríamos hacer:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="introducción-al-lenguaje-r.html#cb68-1" aria-hidden="true" tabindex="-1"></a>new_data<span class="fl">.2</span><span class="ot">&lt;-</span>data[<span class="fu">complete.cases</span>(data),]</span></code></pre></div>
<p>Finalmente, si quisieramos convertir un determinado valor a <code>NA</code>
podríamos ejecutar:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="introducción-al-lenguaje-r.html#cb69-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>AB[data<span class="sc">$</span>HD<span class="sc">==</span><span class="dv">0</span>]<span class="ot">&lt;-</span><span class="cn">NA</span></span></code></pre></div>
<div id="reemplazar-valores-na-con-parámetros-de-la-muestra" class="section level5" number="2.6.2.1.1">
<h5><span class="header-section-number">2.6.2.1.1</span> Reemplazar valores <code>NA</code> con parámetros de la muestra</h5>
<p>Como se ha dicho anteriormente, al calcular parámetros de nuestra
muestra y contar con valores <code>NA</code> el resultado será <code>NA</code> salvo que le
indiquemos que no lo tenga en cuenta con <code>na.rm</code>. De esta forma,
evitaremos el error, pero, por contra, perderemos registros de nuestro
<code>data.frame</code> si este cuenta con más.</p>
<p>Por ello, en ocasiones es adecuado reemplazar esos valores con el
parámetro que estemos calculando:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="introducción-al-lenguaje-r.html#cb70-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>NC<span class="ot">&lt;-</span><span class="fu">ifelse</span>(<span class="fu">is.na</span>(data<span class="sc">$</span>NC), </span>
<span id="cb70-2"><a href="introducción-al-lenguaje-r.html#cb70-2" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">mean</span>(data<span class="sc">$</span>NC, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb70-3"><a href="introducción-al-lenguaje-r.html#cb70-3" aria-hidden="true" tabindex="-1"></a>                         data<span class="sc">$</span>NC)</span></code></pre></div>
<p>Esta opción es adecuada para variables continuas. En el caso de
variables categóricas, podemos asignar un valor aleatorio, de todos los
posibles con los que contamos en ese caso.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="introducción-al-lenguaje-r.html#cb71-1" aria-hidden="true" tabindex="-1"></a>rand.impute<span class="ot">&lt;-</span><span class="cf">function</span>(x){ <span class="co"># x es un vector de datos que puede contener NA</span></span>
<span id="cb71-2"><a href="introducción-al-lenguaje-r.html#cb71-2" aria-hidden="true" tabindex="-1"></a>  missing<span class="ot">&lt;-</span><span class="fu">is.na</span>(x) <span class="co"># missing es un vector que contiene TRUE o FALSE en función de que x sea NA o no</span></span>
<span id="cb71-3"><a href="introducción-al-lenguaje-r.html#cb71-3" aria-hidden="true" tabindex="-1"></a>  n.missing<span class="ot">&lt;-</span><span class="fu">sum</span>(missing) <span class="co">#sumamos missing y obtenemos el número de verdaderos y por tanto obtenemos cuantos NA tenemos</span></span>
<span id="cb71-4"><a href="introducción-al-lenguaje-r.html#cb71-4" aria-hidden="true" tabindex="-1"></a>  x.obs<span class="ot">&lt;-</span>x[<span class="sc">!</span>missing] <span class="co"># Obtenemos que datos tienen valor diferente de NA en x, es decir, me quedo con los que no son NA</span></span>
<span id="cb71-5"><a href="introducción-al-lenguaje-r.html#cb71-5" aria-hidden="true" tabindex="-1"></a>  imputed<span class="ot">&lt;-</span>x</span>
<span id="cb71-6"><a href="introducción-al-lenguaje-r.html#cb71-6" aria-hidden="true" tabindex="-1"></a>  imputed[missing]<span class="ot">&lt;-</span><span class="fu">sample</span>(x.obs, n.missing, <span class="at">replace =</span> <span class="cn">TRUE</span>) <span class="co">#Extraemos una muestra aleatoria de los datos que conocemos, x.obs, de un tamaño n.missing, y los asignamos a los que no conocemos</span></span>
<span id="cb71-7"><a href="introducción-al-lenguaje-r.html#cb71-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span> (imputed)</span>
<span id="cb71-8"><a href="introducción-al-lenguaje-r.html#cb71-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb71-9"><a href="introducción-al-lenguaje-r.html#cb71-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-10"><a href="introducción-al-lenguaje-r.html#cb71-10" aria-hidden="true" tabindex="-1"></a>random.impute.dataframe<span class="ot">&lt;-</span> <span class="cf">function</span>(dataframe, cols) {</span>
<span id="cb71-11"><a href="introducción-al-lenguaje-r.html#cb71-11" aria-hidden="true" tabindex="-1"></a>  names<span class="ot">&lt;-</span><span class="fu">names</span>(dataframe)</span>
<span id="cb71-12"><a href="introducción-al-lenguaje-r.html#cb71-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (col <span class="cf">in</span> cols){</span>
<span id="cb71-13"><a href="introducción-al-lenguaje-r.html#cb71-13" aria-hidden="true" tabindex="-1"></a>    name<span class="ot">&lt;-</span><span class="fu">paste</span>(names[col], <span class="st">&quot;.imputed&quot;</span>, <span class="at">sep=</span><span class="st">&quot;&quot;</span>)</span>
<span id="cb71-14"><a href="introducción-al-lenguaje-r.html#cb71-14" aria-hidden="true" tabindex="-1"></a>    dataframe[name]<span class="ot">=</span><span class="fu">rand.impute</span>(dataframe[,col])</span>
<span id="cb71-15"><a href="introducción-al-lenguaje-r.html#cb71-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb71-16"><a href="introducción-al-lenguaje-r.html#cb71-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-17"><a href="introducción-al-lenguaje-r.html#cb71-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb71-18"><a href="introducción-al-lenguaje-r.html#cb71-18" aria-hidden="true" tabindex="-1"></a>data2<span class="ot">&lt;-</span>data</span>
<span id="cb71-19"><a href="introducción-al-lenguaje-r.html#cb71-19" aria-hidden="true" tabindex="-1"></a><span class="fu">random.impute.dataframe</span>(data2,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>))</span></code></pre></div>
</div>
<div id="eliminar-registros-na" class="section level5" number="2.6.2.1.2">
<h5><span class="header-section-number">2.6.2.1.2</span> Eliminar registros <code>NA</code></h5>
<p>Las más de las veces, querremos eliminar los datos <code>NA</code>. Para ello,
haremos uso del comando <code>na.omit</code>:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="introducción-al-lenguaje-r.html#cb72-1" aria-hidden="true" tabindex="-1"></a>data_na.omit<span class="ot">&lt;-</span><span class="fu">na.omit</span>(data)</span></code></pre></div>
</div>
</div>
</div>
<div id="registros-duplicados" class="section level3" number="2.6.3">
<h3><span class="header-section-number">2.6.3</span> Registros duplicados</h3>
<p>La gestión de los registros duplicados es muy sencilla en R con la
función <code>unique()</code></p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="introducción-al-lenguaje-r.html#cb73-1" aria-hidden="true" tabindex="-1"></a>data2<span class="ot">&lt;-</span><span class="fu">unique</span>(data)</span></code></pre></div>
</div>
<div id="reescalado" class="section level3" number="2.6.4">
<h3><span class="header-section-number">2.6.4</span> Reescalado</h3>
<p>Para que funcionen mejor muchos algoritmos, hay que normalizar las
variables de entrada al algoritmo. Por Normalizar conocemos la técnica
que nos permite comprimir o extender los valores de la variable para que
estén en un rango definido. Asímismo, es bastante interesante usar esta
técnica con variables con dispersiones muy grandes (es decir con valores
muy elevados y muy pequeños). El trabajo de normalización se puede
realizar facilmente con la libreria <code>scales</code> <span class="citation">(<a href="#ref-R-scales" role="doc-biblioref">Wickham and Seidel 2020</a>)</span></p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="introducción-al-lenguaje-r.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb74-2"><a href="introducción-al-lenguaje-r.html#cb74-2" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>VSC.rescaled<span class="ot">&lt;-</span><span class="fu">rescale</span>(data<span class="sc">$</span>VSC) </span>
<span id="cb74-3"><a href="introducción-al-lenguaje-r.html#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="co">#El valor más pequeño tomará el valor cero y el más alto tomará el valor uno. El resto se escala de forma líneal:</span></span>
<span id="cb74-4"><a href="introducción-al-lenguaje-r.html#cb74-4" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>VSC.rescaled.manual<span class="ot">&lt;-</span>(data<span class="sc">$</span>VSC<span class="sc">-</span><span class="fu">min</span>(data<span class="sc">$</span>VSC))<span class="sc">/</span>(<span class="fu">max</span>(data<span class="sc">$</span>VSC)<span class="sc">-</span><span class="fu">min</span>(data<span class="sc">$</span>VSC))</span>
<span id="cb74-5"><a href="introducción-al-lenguaje-r.html#cb74-5" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>VSC.rescaled<span class="fl">.100</span><span class="ot">&lt;-</span><span class="fu">rescale</span>(data<span class="sc">$</span>VSC, <span class="at">to=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>)) </span></code></pre></div>
<p>En el caso que quisieramos reescalar varias columnas, podríamos hacer
uso de un bucle:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="introducción-al-lenguaje-r.html#cb75-1" aria-hidden="true" tabindex="-1"></a>rescale.all<span class="ot">&lt;-</span><span class="cf">function</span>(dataframe, cols){</span>
<span id="cb75-2"><a href="introducción-al-lenguaje-r.html#cb75-2" aria-hidden="true" tabindex="-1"></a>  names<span class="ot">&lt;-</span><span class="fu">names</span>(dataframe)</span>
<span id="cb75-3"><a href="introducción-al-lenguaje-r.html#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (col <span class="cf">in</span> cols){</span>
<span id="cb75-4"><a href="introducción-al-lenguaje-r.html#cb75-4" aria-hidden="true" tabindex="-1"></a>    name<span class="ot">&lt;-</span><span class="fu">paste</span>(names[col], <span class="st">&quot;rescaled&quot;</span>, <span class="at">sep=</span><span class="st">&quot;.&quot;</span>)</span>
<span id="cb75-5"><a href="introducción-al-lenguaje-r.html#cb75-5" aria-hidden="true" tabindex="-1"></a>    dataframe[name]<span class="ot">&lt;-</span><span class="fu">rescale</span>(dataframe[,col])</span>
<span id="cb75-6"><a href="introducción-al-lenguaje-r.html#cb75-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb75-7"><a href="introducción-al-lenguaje-r.html#cb75-7" aria-hidden="true" tabindex="-1"></a>  dataframe</span>
<span id="cb75-8"><a href="introducción-al-lenguaje-r.html#cb75-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb75-9"><a href="introducción-al-lenguaje-r.html#cb75-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-10"><a href="introducción-al-lenguaje-r.html#cb75-10" aria-hidden="true" tabindex="-1"></a>data2<span class="ot">&lt;-</span>data</span>
<span id="cb75-11"><a href="introducción-al-lenguaje-r.html#cb75-11" aria-hidden="true" tabindex="-1"></a>data2<span class="ot">&lt;-</span><span class="fu">rescale.all</span>(data2, <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">5</span>))</span></code></pre></div>
</div>
<div id="normalizado-y-estandarizado" class="section level3" number="2.6.5">
<h3><span class="header-section-number">2.6.5</span> Normalizado y estandarizado</h3>
<p>Las más de las veces realizamos pruebas, modelos o simplemente estimamos
valores de parámetros en los que es obligatoria la existencia de
normalidad en nuestros datos. Se entiende por variable normal aquella
cuya distribución de probabilidad se ajusta una curva acampanada en la
que la media aritmética, la mediana y la moda de la distribución son
iguales y se localizan en el pico. Así, la mitad del área bajo la curva
se encuentra a la derecha de este punto central y la otra mitad está a
la izquierda de dicho punto.</p>
<p>No es la única función de distribución, pero si es la más común y una de
sus características más importantes es que casi cualquier distribución
de probabilidad, tanto discreta como continua, se puede aproximar por
una normal bajo ciertas condiciones. Por ello, la mayoría de los
estdísticos más rutinarios exigen la existencia de normalidad para
validar las hipótesis.</p>
<p>El análisis de la normalidad se puede hacer de una forma rudimentaria
comprobando si la media, mediana y moda son “iguales” o de una forma más
compleja a raíz de pruebas de hipótesis como la de Kolmogorov-Smirnov o
el test de Shapiro. Asimismo, gráficamente, representando el histograma
de frecuencias o con gráficos de cajas (box-plot) podremos comprobar su
cumplimiento.</p>
<p>En R, estas pruebas forman parte del núcleo del software, usándose los
siguientes comandos para comprobarla:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="introducción-al-lenguaje-r.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(data<span class="sc">$</span>VSC) <span class="co"># Media aritmética</span></span></code></pre></div>
<pre><code>## [1] 30.66169</code></pre>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="introducción-al-lenguaje-r.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(data<span class="sc">$</span>VSC) <span class="co"># Mediana</span></span></code></pre></div>
<pre><code>## [1] 27.895</code></pre>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="introducción-al-lenguaje-r.html#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">shapiro.test</span>(data<span class="sc">$</span>VSC) <span class="co">#Test de Shapiro (para pruebas con más de 50 datos)</span></span></code></pre></div>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  data$VSC
## W = 0.93232, p-value = 3.935e-16</code></pre>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="introducción-al-lenguaje-r.html#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ks.test</span>(data<span class="sc">$</span>VSC, <span class="st">&quot;pnorm&quot;</span>, <span class="fu">mean</span>(data<span class="sc">$</span>VSC), <span class="fu">sd</span>(data<span class="sc">$</span>VSC)) <span class="co"># Test de Kolmogorov</span></span></code></pre></div>
<pre><code>## Warning in ks.test(data$VSC, &quot;pnorm&quot;, mean(data$VSC), sd(data$VSC)): ties should
## not be present for the Kolmogorov-Smirnov test</code></pre>
<pre><code>## 
##  One-sample Kolmogorov-Smirnov test
## 
## data:  data$VSC
## D = 0.066132, p-value = 0.008827
## alternative hypothesis: two-sided</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="introducción-al-lenguaje-r.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>)) <span class="co"># Representación gráfica</span></span>
<span id="cb85-2"><a href="introducción-al-lenguaje-r.html#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(data<span class="sc">$</span>VSC)</span>
<span id="cb85-3"><a href="introducción-al-lenguaje-r.html#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(data<span class="sc">$</span>VSC)</span>
<span id="cb85-4"><a href="introducción-al-lenguaje-r.html#cb85-4" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(data<span class="sc">$</span>VSC)</span>
<span id="cb85-5"><a href="introducción-al-lenguaje-r.html#cb85-5" aria-hidden="true" tabindex="-1"></a><span class="fu">qqnorm</span>(data<span class="sc">$</span>VSC)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-45-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="introducción-al-lenguaje-r.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>)) </span></code></pre></div>
<p>Muchas veces la no existencia de normalidad puede ser solucionada con
una transformación de los datos. La transformación consiste en aplicar
una determinada operación matemática, de forma que una vez aplicada la
variable alcance cierto grado de normalidad. En general con variables
cuya distribución esté sesgada a la izquierda, la normalidad se puede
alcanzar con aplicando el logaritmo neperiano de la misma (así
comprimiremos la cola de la izquierda y extenderemos la de la derecha.).
Si, por el contrario, la distribución está sesgada a la derecha, la
aplicación de una raíz cuadrada puede solucionar el problema.</p>
<p>Otras veces, el alcanzar la normalidad no es tan sencillo y es necesario
utilizar transformación en las que entran en juego potencias. En este
sentido destaca la conocida tranformación planteada por Box y Cox. En R
su consecución se realiza a partir de la aplicación de librería <code>car</code>
<span class="citation">(<a href="#ref-R-car" role="doc-biblioref">Fox, Weisberg, and Price 2021</a>)</span></p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="introducción-al-lenguaje-r.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(car)</span>
<span id="cb87-2"><a href="introducción-al-lenguaje-r.html#cb87-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-3"><a href="introducción-al-lenguaje-r.html#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">powerTransform</span>(data<span class="sc">$</span>VSC))</span></code></pre></div>
<pre><code>## bcPower Transformation to Normality 
##          Est Power Rounded Pwr Wald Lwr Bnd Wald Upr Bnd
## data$VSC    0.4838         0.5       0.4059       0.5616
## 
## Likelihood ratio test that transformation parameter is equal to 0
##  (log transformation)
##                            LRT df       pval
## LR test, lambda = (0) 177.8797  1 &lt; 2.22e-16
## 
## Likelihood ratio test that no transformation is needed
##                            LRT df       pval
## LR test, lambda = (1) 144.6436  1 &lt; 2.22e-16</code></pre>
<p>La variable transformada será <code>(-1+datos^"Est.Power")/("Est.Power")</code>:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="introducción-al-lenguaje-r.html#cb89-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>VSC.transform<span class="ot">&lt;-</span>(<span class="sc">-</span><span class="dv">1</span><span class="sc">+</span>data<span class="sc">$</span>VSC<span class="sc">^</span><span class="fl">0.4838</span>)<span class="sc">/</span>(<span class="fl">0.4838</span>)</span>
<span id="cb89-2"><a href="introducción-al-lenguaje-r.html#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>)) <span class="co"># Representación gráfica</span></span>
<span id="cb89-3"><a href="introducción-al-lenguaje-r.html#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(data<span class="sc">$</span>VSC.transform)</span>
<span id="cb89-4"><a href="introducción-al-lenguaje-r.html#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(data<span class="sc">$</span>VSC.transform)</span>
<span id="cb89-5"><a href="introducción-al-lenguaje-r.html#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(data<span class="sc">$</span>VSC.transform)</span>
<span id="cb89-6"><a href="introducción-al-lenguaje-r.html#cb89-6" aria-hidden="true" tabindex="-1"></a><span class="fu">qqnorm</span>(data<span class="sc">$</span>VSC.transform)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-47-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="introducción-al-lenguaje-r.html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>)) </span></code></pre></div>
<p>Finalmente, en ocasiones nos interesará estandarizar (o tipificar)
nuestras variables, esto es, que nuestra variable se convierta en otra
con una distribución de media cero y desviación típica 1. Esto se
consigue facilmente con el comando <code>scale()</code>.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="introducción-al-lenguaje-r.html#cb91-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>VSC.tip<span class="ot">&lt;-</span><span class="fu">scale</span>(data<span class="sc">$</span>VSC)</span>
<span id="cb91-2"><a href="introducción-al-lenguaje-r.html#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(data<span class="sc">$</span>VSC.tip)</span></code></pre></div>
<pre><code>## [1] 8.456093e-17</code></pre>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="introducción-al-lenguaje-r.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(data<span class="sc">$</span>VSC.tip)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
</div>
<div id="categorizar-los-datos" class="section level3" number="2.6.6">
<h3><span class="header-section-number">2.6.6</span> Categorizar los datos</h3>
<p>Muchas veces nos interesará categorizar los datos en rangos en función a
un valor numérico. Para ellos, haremos uso de la función <code>cut</code>:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="introducción-al-lenguaje-r.html#cb95-1" aria-hidden="true" tabindex="-1"></a>cortes.num<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="sc">-</span><span class="cn">Inf</span>, <span class="dv">16</span>, <span class="dv">25</span>, <span class="dv">40</span>, <span class="cn">Inf</span>)</span>
<span id="cb95-2"><a href="introducción-al-lenguaje-r.html#cb95-2" aria-hidden="true" tabindex="-1"></a>cortes.label<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;bajo&quot;</span>, <span class="st">&quot;medio&quot;</span>, <span class="st">&quot;alto&quot;</span>, <span class="st">&quot;muy alto&quot;</span>)</span>
<span id="cb95-3"><a href="introducción-al-lenguaje-r.html#cb95-3" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>VSC.cat<span class="ot">&lt;-</span><span class="fu">cut</span>(data<span class="sc">$</span>VSC, <span class="at">breaks =</span> cortes.num, <span class="at">labels =</span> cortes.label)</span></code></pre></div>
<p>Siguiendo con lo anterior, al realizar ciertos análisis como los de
regresión, la variable dependiente y las independientes no solamente
pueden estar dadas por variables cuantitativas: existen otros tipos de
variables de carácter cualitativo. Dichas variables se conocen
comúnmente como variables dummy y usualmente, dichas variables indican
la presencia o ausencia de una cualidad o atributo, tomando valor de 1
en una submuestra y 0 en el resto de la muestra.</p>
<p>La gestión de este tipo de variables podemos hacerlo con la libreria
<code>dummies</code> <span class="citation">(<a href="#ref-R-dummies" role="doc-biblioref">Brown 2012</a>)</span>.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="introducción-al-lenguaje-r.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dummies)</span>
<span id="cb96-2"><a href="introducción-al-lenguaje-r.html#cb96-2" aria-hidden="true" tabindex="-1"></a>data.dummy<span class="ot">&lt;-</span><span class="fu">dummy.data.frame</span>(data, <span class="at">sep=</span><span class="st">&quot;.&quot;</span>)</span>
<span id="cb96-3"><a href="introducción-al-lenguaje-r.html#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data.dummy)</span></code></pre></div>
<pre><code>##   COMARCA.ANDEVALO COMARCA.COSTA COMARCA.SIERRA COMARCA.NA     NC    HD   AB
## 1                0             1              0          0 683.33 16.82 8.00
## 2                0             1              0          0 800.00 16.15 6.35
## 3                0             1              0          0 800.00 16.15 6.35
## 4                0             1              0          0 800.00 16.15 6.35
## 5                0             1              0          0 650.00 18.48 9.33
## 6                0             1              0          0 750.00 16.70 9.23
##     VSC VSC.rescaled VSC.rescaled.manual VSC.rescaled.100 VSC.transform
## 1 41.85    0.2771390           0.2771390         27.71390     10.519687
## 2 30.75    0.2029412           0.2029412         20.29412      8.776134
## 3 30.75    0.2029412           0.2029412         20.29412      8.776134
## 4 30.75    0.2029412           0.2029412         20.29412      8.776134
## 5 53.77    0.3568182           0.3568182         35.68182     12.142223
## 6 49.64    0.3292112           0.3292112         32.92112     11.603315
##       VSC.tip VSC.cat.bajo VSC.cat.medio VSC.cat.alto VSC.cat.muy alto
## 1 0.556328224            0             0            0                1
## 2 0.004390957            0             0            1                0
## 3 0.004390957            0             0            1                0
## 4 0.004390957            0             0            1                0
## 5 1.149039236            0             0            0                1
## 6 0.943678793            0             0            0                1</code></pre>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="introducción-al-lenguaje-r.html#cb98-1" aria-hidden="true" tabindex="-1"></a>data.dummy2<span class="ot">&lt;-</span><span class="fu">dummy.data.frame</span>(data, <span class="at">names=</span><span class="fu">c</span>(<span class="st">&quot;COMARCA&quot;</span>), <span class="at">sep=</span><span class="st">&quot;.&quot;</span>) <span class="co"># Solo lo aplicamos a una o varias variables en vez de a todas las categóricas del data.frame</span></span>
<span id="cb98-2"><a href="introducción-al-lenguaje-r.html#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data.dummy2)</span></code></pre></div>
<pre><code>##   COMARCA.ANDEVALO COMARCA.COSTA COMARCA.SIERRA COMARCA.NA     NC    HD   AB
## 1                0             1              0          0 683.33 16.82 8.00
## 2                0             1              0          0 800.00 16.15 6.35
## 3                0             1              0          0 800.00 16.15 6.35
## 4                0             1              0          0 800.00 16.15 6.35
## 5                0             1              0          0 650.00 18.48 9.33
## 6                0             1              0          0 750.00 16.70 9.23
##     VSC VSC.rescaled VSC.rescaled.manual VSC.rescaled.100 VSC.transform
## 1 41.85    0.2771390           0.2771390         27.71390     10.519687
## 2 30.75    0.2029412           0.2029412         20.29412      8.776134
## 3 30.75    0.2029412           0.2029412         20.29412      8.776134
## 4 30.75    0.2029412           0.2029412         20.29412      8.776134
## 5 53.77    0.3568182           0.3568182         35.68182     12.142223
## 6 49.64    0.3292112           0.3292112         32.92112     11.603315
##       VSC.tip  VSC.cat
## 1 0.556328224 muy alto
## 2 0.004390957     alto
## 3 0.004390957     alto
## 4 0.004390957     alto
## 5 1.149039236 muy alto
## 6 0.943678793 muy alto</code></pre>
<p>Finalmente, la eliminación de un objeto se debe realizar con el comando
<code>rm</code>:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="introducción-al-lenguaje-r.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(a)</span></code></pre></div>
</div>
</div>
<div id="profundizando-en-el-data.frame" class="section level2" number="2.7">
<h2><span class="header-section-number">2.7</span> Profundizando en el <code>data.frame</code></h2>
<div id="introducción-1" class="section level3" number="2.7.1">
<h3><span class="header-section-number">2.7.1</span> Introducción</h3>
<p>Las más de las veces nuestras estructuras de datos se enmarcarán dentro
de “tablas” clásicas y son necesiarias para la amplia mayoría de
análisis estadísticos.Estas tablas, en R, se denominan <code>data.frame</code> y,
lo más común es que partamos de una tabla con datos y con ella y sobre
ella ejecutemos nuestros análisis.</p>
<p>R, como tal, no dispone de un sistema visual para gestionar las tablas
por lo que deberemos conocer los rudimentos para procesarlas y
adaptarlas a nuestros requerimientos una vez las tengamos en la memoria
despues de haberlas cargado tal y como se explicó en el capítulo
<a href="#data"><strong>??</strong></a>.</p>
</div>
<div id="visualizar-tablas" class="section level3" number="2.7.2">
<h3><span class="header-section-number">2.7.2</span> Visualizar tablas</h3>
<p>Generalmente comenzaremos visualizando nuestra tabla. Para ello, R
dispone, entre otros de los sigueintes comandos (comenzaremos cargando
el fichero <code>iris</code>):</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="introducción-al-lenguaje-r.html#cb101-1" aria-hidden="true" tabindex="-1"></a>iris</span>
<span id="cb101-2"><a href="introducción-al-lenguaje-r.html#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(iris) <span class="co"># hace una representación gráfica</span></span>
<span id="cb101-3"><a href="introducción-al-lenguaje-r.html#cb101-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(iris) <span class="co">#calcula los estadísticos descriptivos</span></span>
<span id="cb101-4"><a href="introducción-al-lenguaje-r.html#cb101-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris) <span class="co">#extrae los 6 primeros registros</span></span>
<span id="cb101-5"><a href="introducción-al-lenguaje-r.html#cb101-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span> (iris) <span class="co">#extrae los 6 últimos registros</span></span>
<span id="cb101-6"><a href="introducción-al-lenguaje-r.html#cb101-6" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(iris) <span class="co"># muestra las cabeceras de las columnas</span></span>
<span id="cb101-7"><a href="introducción-al-lenguaje-r.html#cb101-7" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(iris) <span class="co"># visualiza las dimensiones de filas y columnas de la tabla</span></span></code></pre></div>
</div>
<div id="extracción-de-datos-en-nuevos-data.frame" class="section level3" number="2.7.3">
<h3><span class="header-section-number">2.7.3</span> Extracción de datos en nuevos <code>data.frame</code></h3>
<p>Un recurso muy interesante de R es como extrae los datos del
<code>data.frame</code>. Veamos algunos ejemplos:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="introducción-al-lenguaje-r.html#cb102-1" aria-hidden="true" tabindex="-1"></a>iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,] <span class="co">#extrae las 10 primeras filas</span></span>
<span id="cb102-2"><a href="introducción-al-lenguaje-r.html#cb102-2" aria-hidden="true" tabindex="-1"></a>iris[,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>] <span class="co">#extrae las 3 primeras columnas</span></span>
<span id="cb102-3"><a href="introducción-al-lenguaje-r.html#cb102-3" aria-hidden="true" tabindex="-1"></a>iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>] <span class="co">#extrae las 10 primeras filas y de las 3 primeras columnas</span></span>
<span id="cb102-4"><a href="introducción-al-lenguaje-r.html#cb102-4" aria-hidden="true" tabindex="-1"></a>iris[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">8</span>),] <span class="co">#extrae las filas 2, 5, y 8</span></span>
<span id="cb102-5"><a href="introducción-al-lenguaje-r.html#cb102-5" aria-hidden="true" tabindex="-1"></a>iris[, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)] <span class="co">#extrae las columnas 1 y 3</span></span></code></pre></div>
<p>Por otro lado, si no conocemos el número de columna del campo que
deseamos, siempre podremos, evidentemente, extraerlo con su nombre:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="introducción-al-lenguaje-r.html#cb103-1" aria-hidden="true" tabindex="-1"></a>iris[, <span class="st">&quot;Sepal.Width&quot;</span>]</span></code></pre></div>
<p>Finalmente, si deseamos extraer determinados elementos con expresiones
lógicas, podremos hacerlo con un simple comando:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="introducción-al-lenguaje-r.html#cb104-1" aria-hidden="true" tabindex="-1"></a>iris[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>,]</span></code></pre></div>
</div>
<div id="gestionar-los-data.frame" class="section level3" number="2.7.4">
<h3><span class="header-section-number">2.7.4</span> Gestionar los <code>data.frame</code></h3>
<p>Si antes nos referiamos a la visualización y extracción de los
elementos, veamos ahora como se gestionan los <code>data.frame</code>en su
conjunto.</p>
<p>Para añadir una columna, lo haremos añadiendo una variable dentro de
ella:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="introducción-al-lenguaje-r.html#cb105-1" aria-hidden="true" tabindex="-1"></a>datos<span class="ot">&lt;-</span>iris</span>
<span id="cb105-2"><a href="introducción-al-lenguaje-r.html#cb105-2" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">$</span>Petal.Area <span class="ot">&lt;-</span> datos<span class="sc">$</span>Petal.Length <span class="sc">*</span> datos<span class="sc">$</span>Petal.Width</span>
<span id="cb105-3"><a href="introducción-al-lenguaje-r.html#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span> (datos)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species Petal.Area
## 1          5.1         3.5          1.4         0.2  setosa       0.28
## 2          4.9         3.0          1.4         0.2  setosa       0.28
## 3          4.7         3.2          1.3         0.2  setosa       0.26
## 4          4.6         3.1          1.5         0.2  setosa       0.30
## 5          5.0         3.6          1.4         0.2  setosa       0.28
## 6          5.4         3.9          1.7         0.4  setosa       0.68</code></pre>
<p>Y para eliminarlas, lo podremos hacer <em>anulando</em> la columna deseada:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="introducción-al-lenguaje-r.html#cb107-1" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">$</span>Petal.Area <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb107-2"><a href="introducción-al-lenguaje-r.html#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span> (datos)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p>Por otro lado, podremos desear ordenar los datos de una determinada
manera.Para ello, haremos uso de <code>order</code>:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="introducción-al-lenguaje-r.html#cb109-1" aria-hidden="true" tabindex="-1"></a>datos2 <span class="ot">&lt;-</span> iris[<span class="fu">order</span>(iris<span class="sc">$</span>Sepal.Width),]</span></code></pre></div>
</div>
<div id="la-libreria-dplyr" class="section level3" number="2.7.5">
<h3><span class="header-section-number">2.7.5</span> La libreria <code>dplyr</code></h3>
<p>En este punto, si bien como se ha descrito en los puntos anteriors R, en
su versión <code>base</code> es bastante potente en la gestión de los <code>data.frame</code>,
es adecuado destacar el paquete <code>dplyr</code> <span class="citation">(<a href="#ref-R-dplyr" role="doc-biblioref">Wickham, François, et al. 2021</a>)</span>que entre otras cosas,
hace más natural la gramática de trabajo con las tablas.</p>
<p>La sintaxis grámatica de esta libreria facilita la gestión de los
elementos ya que las peticiones y comandos se hacen con las palabras
habituales en otros softwares, lo que nos descarga en gran medida de
memorizar comandos recurrentes. Veamos algunos ejemplos:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="introducción-al-lenguaje-r.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span> (dplyr)</span>
<span id="cb110-2"><a href="introducción-al-lenguaje-r.html#cb110-2" aria-hidden="true" tabindex="-1"></a>datos<span class="ot">&lt;-</span>iris</span>
<span id="cb110-3"><a href="introducción-al-lenguaje-r.html#cb110-3" aria-hidden="true" tabindex="-1"></a>subset <span class="ot">&lt;-</span> <span class="fu">select</span>(datos, Sepal.Width<span class="sc">:</span>Species) <span class="co">#extrae las columnas que van de Sepal.Width:Species</span></span>
<span id="cb110-4"><a href="introducción-al-lenguaje-r.html#cb110-4" aria-hidden="true" tabindex="-1"></a>Petal.Length<span class="fl">.5</span><span class="ot">&lt;-</span> <span class="fu">filter</span>(datos, Petal.Length <span class="sc">&gt;</span> <span class="dv">5</span>) <span class="co">#extrae aquellas filas donde Petal.Length es mayor de cinco</span></span>
<span id="cb110-5"><a href="introducción-al-lenguaje-r.html#cb110-5" aria-hidden="true" tabindex="-1"></a>Petal.Length.order <span class="ot">&lt;-</span> <span class="fu">arrange</span>(datos, <span class="fu">desc</span>(Petal.Length)) <span class="co">#Extrae un nuevo data.frame ordenado por Petal.Length de forma descendente</span></span>
<span id="cb110-6"><a href="introducción-al-lenguaje-r.html#cb110-6" aria-hidden="true" tabindex="-1"></a>Petal.Length.rename<span class="ot">&lt;-</span><span class="fu">rename</span>(iris, <span class="at">Long.Petalos=</span>Petal.Length, <span class="at">Ancho.Petalos=</span>Petal.Width) <span class="co">#Renombra determinadas columnas</span></span>
<span id="cb110-7"><a href="introducción-al-lenguaje-r.html#cb110-7" aria-hidden="true" tabindex="-1"></a>iris.Petal.Area <span class="ot">&lt;-</span> <span class="fu">mutate</span>(iris, <span class="at">Petal.Area =</span> Petal.Width<span class="sc">*</span>Petal.Length) <span class="co">#Añade una nueva variable al data.frame</span></span>
<span id="cb110-8"><a href="introducción-al-lenguaje-r.html#cb110-8" aria-hidden="true" tabindex="-1"></a>iris.aleat<span class="ot">&lt;-</span><span class="fu">sample_n</span>(iris, <span class="dv">4</span>) <span class="co">#Extrae aleatoriamente cuatro registros</span></span>
<span id="cb110-9"><a href="introducción-al-lenguaje-r.html#cb110-9" aria-hidden="true" tabindex="-1"></a>iris.aleat<span class="fl">.025</span><span class="ot">&lt;-</span> <span class="fu">sample_frac</span>(iris, <span class="fl">0.25</span>, <span class="at">rep=</span><span class="cn">TRUE</span>) <span class="co">#Extrae un 25% de obs con reemplazamiento</span></span></code></pre></div>
<p>Mención aparte requiere el operador <code>%&gt;%</code>. Este permite concatenar
varias secuencias de comandos aliviando drásticamente nuestro código:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="introducción-al-lenguaje-r.html#cb111-1" aria-hidden="true" tabindex="-1"></a>iris<span class="fl">.2</span><span class="ot">&lt;-</span> <span class="fu">select</span>(iris, <span class="fu">contains</span>(<span class="st">&#39;Petal&#39;</span>))</span>
<span id="cb111-2"><a href="introducción-al-lenguaje-r.html#cb111-2" aria-hidden="true" tabindex="-1"></a>iris<span class="fl">.3</span><span class="ot">&lt;-</span> <span class="fu">filter</span>(iris<span class="fl">.2</span>, Petal.Length <span class="sc">&gt;</span> <span class="dv">4</span>)</span>
<span id="cb111-3"><a href="introducción-al-lenguaje-r.html#cb111-3" aria-hidden="true" tabindex="-1"></a>iris<span class="fl">.4</span><span class="ot">&lt;-</span> <span class="fu">arrange</span>(iris<span class="fl">.3</span>, Petal.Length)</span>
<span id="cb111-4"><a href="introducción-al-lenguaje-r.html#cb111-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris<span class="fl">.4</span>)</span></code></pre></div>
<pre><code>##   Petal.Length Petal.Width
## 1          4.1         1.0
## 2          4.1         1.3
## 3          4.1         1.3
## 4          4.2         1.5
## 5          4.2         1.3
## 6          4.2         1.2</code></pre>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="introducción-al-lenguaje-r.html#cb113-1" aria-hidden="true" tabindex="-1"></a>iris<span class="fl">.5</span><span class="ot">&lt;-</span>iris <span class="sc">%&gt;%</span></span>
<span id="cb113-2"><a href="introducción-al-lenguaje-r.html#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">&#39;Petal&#39;</span>))  <span class="sc">%&gt;%</span></span>
<span id="cb113-3"><a href="introducción-al-lenguaje-r.html#cb113-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Petal.Length <span class="sc">&gt;</span> <span class="dv">4</span>)   <span class="sc">%&gt;%</span></span>
<span id="cb113-4"><a href="introducción-al-lenguaje-r.html#cb113-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Petal.Length)</span>
<span id="cb113-5"><a href="introducción-al-lenguaje-r.html#cb113-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris<span class="fl">.5</span>)</span></code></pre></div>
<pre><code>##   Petal.Length Petal.Width
## 1          4.1         1.0
## 2          4.1         1.3
## 3          4.1         1.3
## 4          4.2         1.5
## 5          4.2         1.3
## 6          4.2         1.2</code></pre>
<p>Para finalizar, queda mencionar que la concatenación de los comandos de
<code>dplyr</code> con el operador <code>%&gt;%</code>permite crear estructuras no definidas en
el paquete, pero que son de uso recurrente. Veamos como calculamos unos
subtotales de nuestra tabla <code>iris</code>por especie:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="introducción-al-lenguaje-r.html#cb115-1" aria-hidden="true" tabindex="-1"></a>iris.summarize<span class="ot">&lt;-</span>iris <span class="sc">%&gt;%</span></span>
<span id="cb115-2"><a href="introducción-al-lenguaje-r.html#cb115-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span></span>
<span id="cb115-3"><a href="introducción-al-lenguaje-r.html#cb115-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">mean</span>(Petal.Length))<span class="sc">%&gt;%</span></span>
<span id="cb115-4"><a href="introducción-al-lenguaje-r.html#cb115-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Especies=</span>Species, <span class="at">Long.Petalos.media=</span><span class="st">`</span><span class="at">mean(Petal.Length)</span><span class="st">`</span>) <span class="co">#Notese las comillas en el campo mean(Petal.Length) que no está en el campo Species</span></span></code></pre></div>
</div>
</div>
<div id="estructuras-de-control" class="section level2" number="2.8">
<h2><span class="header-section-number">2.8</span> Estructuras de control</h2>
<div id="introducción-2" class="section level3" number="2.8.1">
<h3><span class="header-section-number">2.8.1</span> Introducción</h3>
<p>Las estructuras de control en R nos permiten automatizar los flujos de
programación y las secuencias de comandos, haciendo que trabajos
reiterativos sena más sencillos y abordables (no confundir con las
funciones, que se abordarán en el capítulo <a href="#functions"><strong>??</strong></a>).</p>
<p>Las estructuras de control más utilizadas son:</p>
<ul>
<li><code>if / else</code>: el fragmenteo se ejecutará o no en función de una
condición.</li>
<li><code>for</code>: se ejecuta un bucle de forma definida según un número
determinado de ocasiones.</li>
<li><code>while</code>: ejecuta un bucle mientras sea verdadera una condición.</li>
</ul>
<p>Junto a ellas, debemos tener presentes otras de uso menor como:</p>
<ul>
<li><code>repeat</code>: el bucle se ejecutará indefinidamente hasta que lo
detengamos con <code>break</code>.</li>
<li><code>next</code>: salta a la siguiente ejecución de un bucle.</li>
</ul>
<p>###<code>if/else</code> Como se ha dicho, esta estructura de control se
ejecutara o no, en función de que se cumpla una determinada condición.
De forma esquemática:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="introducción-al-lenguaje-r.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">&lt;</span>condicion<span class="sc">&gt;</span>) {</span>
<span id="cb116-2"><a href="introducción-al-lenguaje-r.html#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="do">## bloque de código</span></span>
<span id="cb116-3"><a href="introducción-al-lenguaje-r.html#cb116-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>O, en el caso de que queramos que se ejecute algo distinto a que
condición nos marca, podremos hacer:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="introducción-al-lenguaje-r.html#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">&lt;</span>condicion<span class="sc">&gt;</span>) {</span>
<span id="cb117-2"><a href="introducción-al-lenguaje-r.html#cb117-2" aria-hidden="true" tabindex="-1"></a>  <span class="do">## bloque de código</span></span>
<span id="cb117-3"><a href="introducción-al-lenguaje-r.html#cb117-3" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb117-4"><a href="introducción-al-lenguaje-r.html#cb117-4" aria-hidden="true" tabindex="-1"></a>  <span class="do">## otro bloque de código</span></span>
<span id="cb117-5"><a href="introducción-al-lenguaje-r.html#cb117-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Tambien podremos anidarlos:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="introducción-al-lenguaje-r.html#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">&lt;</span>condicion1<span class="sc">&gt;</span>) {</span>
<span id="cb118-2"><a href="introducción-al-lenguaje-r.html#cb118-2" aria-hidden="true" tabindex="-1"></a>  <span class="do">## bloque de código</span></span>
<span id="cb118-3"><a href="introducción-al-lenguaje-r.html#cb118-3" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span>(<span class="sc">&lt;</span>condicion2<span class="sc">&gt;</span>) {</span>
<span id="cb118-4"><a href="introducción-al-lenguaje-r.html#cb118-4" aria-hidden="true" tabindex="-1"></a>  <span class="do">## otro bloque de código</span></span>
<span id="cb118-5"><a href="introducción-al-lenguaje-r.html#cb118-5" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb118-6"><a href="introducción-al-lenguaje-r.html#cb118-6" aria-hidden="true" tabindex="-1"></a>  <span class="do">## otro bloque de código</span></span>
<span id="cb118-7"><a href="introducción-al-lenguaje-r.html#cb118-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Veamos un ejemplo muy simple:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="introducción-al-lenguaje-r.html#cb119-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">10</span>)</span>
<span id="cb119-2"><a href="introducción-al-lenguaje-r.html#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(x <span class="sc">&gt;</span> <span class="dv">3</span>) {</span>
<span id="cb119-3"><a href="introducción-al-lenguaje-r.html#cb119-3" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb119-4"><a href="introducción-al-lenguaje-r.html#cb119-4" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb119-5"><a href="introducción-al-lenguaje-r.html#cb119-5" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb119-6"><a href="introducción-al-lenguaje-r.html#cb119-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>El anterior comando genera un objeto <code>x</code> cuyo valor se obtiene de forma
aleatoria entre 0 y 10. A continaución hacemos nuestro bucle: si <code>x</code> es
mayor de 3, se creará un objeto <code>y</code> con valor <code>TRUE</code>, mientras que si no
es así, <code>y</code> tomará el valor <code>FALSE</code>.</p>
</div>
<div id="while" class="section level3" number="2.8.2">
<h3><span class="header-section-number">2.8.2</span> <code>while</code></h3>
<p>A diferencia de el anterior con <code>while</code> comemza comprobando una
condición: si esta es verdadera, entonces se comienza con el bucle. Una
vez completada una ejecución de este bloque, se comprueba la condición
nuevamente y así sucesivamente hasta que la comprobación de la condición
de falso. Veamos su forma:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="introducción-al-lenguaje-r.html#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span>(<span class="sc">&lt;</span>condicion<span class="sc">&gt;</span>) {</span>
<span id="cb120-2"><a href="introducción-al-lenguaje-r.html#cb120-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># código</span></span>
<span id="cb120-3"><a href="introducción-al-lenguaje-r.html#cb120-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>A modo de ejemplo:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="introducción-al-lenguaje-r.html#cb121-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb121-2"><a href="introducción-al-lenguaje-r.html#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (i <span class="sc">&lt;</span> <span class="dv">6</span>) {</span>
<span id="cb121-3"><a href="introducción-al-lenguaje-r.html#cb121-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(i)</span>
<span id="cb121-4"><a href="introducción-al-lenguaje-r.html#cb121-4" aria-hidden="true" tabindex="-1"></a>i <span class="ot">=</span> i<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb121-5"><a href="introducción-al-lenguaje-r.html#cb121-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre>
</div>
<div id="for" class="section level3" number="2.8.3">
<h3><span class="header-section-number">2.8.3</span> <code>for</code></h3>
<p>Los bucles <code>for</code> son, con diferencia y por su versatilidad, los más
utilizados en R. En este caso, estos toman el valor que se asigna a
partir de los elementos de un objeto (generalmente listas) y, de forma
sucesiva, van ejecutando los ciclos. Esquemáticamente:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="introducción-al-lenguaje-r.html#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(<span class="sc">&lt;</span>variable<span class="sc">&gt;</span> <span class="cf">in</span> <span class="sc">&lt;</span>objeto iterable<span class="sc">&gt;</span>) {</span>
<span id="cb123-2"><a href="introducción-al-lenguaje-r.html#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># código a ejecutar</span></span>
<span id="cb123-3"><a href="introducción-al-lenguaje-r.html#cb123-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Por ejemplo:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="introducción-al-lenguaje-r.html#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>){</span>
<span id="cb124-2"><a href="introducción-al-lenguaje-r.html#cb124-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb124-3"><a href="introducción-al-lenguaje-r.html#cb124-3" aria-hidden="true" tabindex="-1"></a>} </span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre>
<p>Finalmente indicar que, como el anterior, podremos anidar unos dentro de
otros.</p>
</div>
</div>
<div id="los-gráficos-en-r" class="section level2" number="2.9">
<h2><span class="header-section-number">2.9</span> Los gráficos en R</h2>
<p>Si por algo destaca R es por su capacidad gráfica y por la flexibilidad
en la creación de los mismos ofreciendo una increíble variedad de
gráficos (Para tener una idea, escribe <code>demo(graphics)</code>).</p>
<p>De antemano se debe tener claro una cuestión para el aspecto gráfico en
R: el resultado de una función gráfica no puede ser asignado a un objeto
(recordemos que el resultado de una operación de análisis estadístico se
podia asignar a un objeto) si no que se muestra en el motor gráfico y
nada mas.</p>
<p>Existen dos tipos fundamentales de funciones gráficas: las funciones
gráficas de alto nivel que crean una nueva gráfica y las funciones
gráficas de bajo nivel que agregan elementos a una gráfica ya existente.</p>
<p>La instalación base de R trae una serie de gráficos que a buen seguro
son lo suficientemente versátiles para cumplir con todas nuestras
expectativas. Pero si con ellos no fuera suficiente, existen paquetes
adaptados a esta función que amplían la riqueza gráfica del sistema R.</p>
<p>La función usual de R para producir un gráfico es el comando <code>plot</code>:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="introducción-al-lenguaje-r.html#cb126-1" aria-hidden="true" tabindex="-1"></a>datos<span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">8</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">9</span>,<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">9</span>), <span class="at">ncol=</span><span class="dv">2</span>) </span>
<span id="cb126-2"><a href="introducción-al-lenguaje-r.html#cb126-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(datos)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;Peso&quot;</span>, <span class="st">&quot;Estatura&quot;</span>)</span>
<span id="cb126-3"><a href="introducción-al-lenguaje-r.html#cb126-3" aria-hidden="true" tabindex="-1"></a>datos</span></code></pre></div>
<pre><code>##      Peso Estatura
## [1,]    2        1
## [2,]    5        9
## [3,]    1        5
## [4,]    5        1
## [5,]    8        5
## [6,]    2        9</code></pre>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="introducción-al-lenguaje-r.html#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(datos)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-70-1.png" width="384" style="display: block; margin: auto;" /></p>
<p>Si quisiéramos añadir una descripción a nuestro gráfico, podríamos usar
el comando <code>main</code> que pondrá un título al mismo. Además, podemos
detallar un poco más las descripciones de los ejes con <code>xlab</code> e <code>ylab</code>.
Obviamente, también podremos cambiar el color y el tipo de “punto”
usando <code>col</code> y <code>type</code>. Para finalizar, podríamos añadir una rejilla en
las marcas principales con <code>grid</code> y añadir un texto descriptivo con
<code>text</code> en una determinada coordenada. Veámoslos todos juntos:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="introducción-al-lenguaje-r.html#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(datos, <span class="at">main=</span><span class="st">&quot;Mi primer gráfico en R&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Peso (kg)&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Estatura (m)&quot;</span>, <span class="at">col=</span><span class="st">&quot;red&quot;</span>)</span>
<span id="cb129-2"><a href="introducción-al-lenguaje-r.html#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grid</span>()</span>
<span id="cb129-3"><a href="introducción-al-lenguaje-r.html#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="dv">7</span>, <span class="dv">8</span>, <span class="st">&quot;texto explicativo&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-71-1.png" width="288" style="display: block; margin: auto;" /></p>
<p>Seguimos ampliando las opiones de nuestro gráfico. En ocasiones podremos
desear añadir una determinada línea al mismo. para ello, nos podemos
servir de la función <code>abline</code>:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="introducción-al-lenguaje-r.html#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(datos, <span class="at">main=</span><span class="st">&quot;Mi primer gráfico en R&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Peso (kg)&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Estatura (m)&quot;</span>, <span class="at">col=</span><span class="st">&quot;red&quot;</span>, <span class="at">type=</span><span class="st">&quot;p&quot;</span>)</span>
<span id="cb130-2"><a href="introducción-al-lenguaje-r.html#cb130-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb130-3"><a href="introducción-al-lenguaje-r.html#cb130-3" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h=</span><span class="dv">4</span>, <span class="at">col=</span><span class="st">&quot;green&quot;</span>) <span class="co"># Añade línea horizontal </span></span>
<span id="cb130-4"><a href="introducción-al-lenguaje-r.html#cb130-4" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v=</span><span class="dv">6</span>, <span class="at">col=</span> <span class="st">&quot;blue&quot;</span>) <span class="co"># Análogo para línea vertical</span></span>
<span id="cb130-5"><a href="introducción-al-lenguaje-r.html#cb130-5" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="dv">1</span>,<span class="dv">4</span>, <span class="at">col=</span><span class="st">&quot;grey&quot;</span>, <span class="at">lty=</span><span class="dv">2</span>) <span class="co"># Añade una línea de pendiente 1 y que corta al origen en 3 con trazo discontinuo</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-72-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>El sistema tradicional de gráficos ofrece una variedad de tipos de
gráficos básicos:</p>
<ul>
<li>la función <code>plot()</code> produce gráficos de dispersión,</li>
<li>la función <code>barplot()</code> produce gráficos de barra,</li>
<li>la función <code>hist()</code> produce histogramas,</li>
<li>la función <code>boxplot()</code> produce gráficos de caja,</li>
<li>y la función <code>pie()</code> produce gráficos de tarta.</li>
</ul>
<p>Hemos de tener presente que R no distingue más tipos de gráficos siendo
otros tipos de gráficos variaciones de estos principales. Por ello, un
gráfico de dispersión con sus puntos interconectados por una línea, es
una nueva orden en el comando <code>plot()</code>, denominada <code>type</code>:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="introducción-al-lenguaje-r.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(datos, <span class="at">main=</span><span class="st">&quot;Mi primer gráfico en R&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Peso (kg)&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Estatura (m)&quot;</span>, <span class="at">col=</span><span class="st">&quot;red&quot;</span>, <span class="at">type=</span><span class="st">&quot;p&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-73-1.png" width="384" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="introducción-al-lenguaje-r.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(datos, <span class="at">main=</span><span class="st">&quot;Mi primer gráfico en R&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Peso (kg)&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Estatura (m)&quot;</span>, <span class="at">col=</span><span class="st">&quot;red&quot;</span>, <span class="at">type=</span><span class="st">&quot;l&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-73-2.png" width="384" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="introducción-al-lenguaje-r.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(datos, <span class="at">main=</span><span class="st">&quot;Mi primer gráfico en R&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Peso (kg)&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Estatura (m)&quot;</span>, <span class="at">col=</span><span class="st">&quot;red&quot;</span>, <span class="at">type=</span><span class="st">&quot;b&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-73-3.png" width="384" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="introducción-al-lenguaje-r.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(datos, <span class="at">main=</span><span class="st">&quot;Mi primer gráfico en R&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Peso (kg)&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Estatura (m)&quot;</span>, <span class="at">col=</span><span class="st">&quot;red&quot;</span>, <span class="at">type=</span><span class="st">&quot;h&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-73-4.png" width="384" style="display: block; margin: auto;" /></p>
<p>O, repeticiones más o menos complejas del gráfico principal como el
socorrido <code>pairs()</code> para ver correlaciones:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="introducción-al-lenguaje-r.html#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(iris)</span>
<span id="cb135-2"><a href="introducción-al-lenguaje-r.html#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span> (iris)</span></code></pre></div>
<pre><code>## [1] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot;  &quot;Petal.Length&quot; &quot;Petal.Width&quot;  &quot;Species&quot;</code></pre>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="introducción-al-lenguaje-r.html#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pairs</span>(iris[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="at">pch =</span> <span class="dv">21</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-74-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Llegados a este punto, llega el momento de explicar un recurso del motor
gráfico de R: la organización de los gráficos en la ventana. Para ello
se utiliza la función <code>par()</code> que controla parámetros gráficos
adicionales. veamos como funciona:</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="introducción-al-lenguaje-r.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))      <span class="co"># Dibuja una matriz de gráficos 2x1: un gráfico debajo de otro</span></span>
<span id="cb138-2"><a href="introducción-al-lenguaje-r.html#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>))      <span class="co"># Matriz de gráficos 2 x 3 : dos filas por tres columnas</span></span>
<span id="cb138-3"><a href="introducción-al-lenguaje-r.html#cb138-3" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))      <span class="co"># un solo gráfico por ventana: la opción por defecto</span></span></code></pre></div>
<p>Un detalle más. Ciertos elementos tienen gráficos predefinidos, ya que
se sobreentiende que son de obligado diseño. Caso de esto pueden ser los
gráficos descriptivos de un modelo lineal, por ejemplo (olvidémonos de
la primera sintaxis, que se verá en capítulos más adelante):</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="introducción-al-lenguaje-r.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">&quot;https://raw.githubusercontent.com/juliomsevilla/rlidar/main/data/parc.csv&quot;</span>,</span>
<span id="cb139-2"><a href="introducción-al-lenguaje-r.html#cb139-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">destfile =</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;</span><span class="sc">\\</span><span class="st">parc.csv&quot;</span>, <span class="at">sep=</span><span class="st">&quot;&quot;</span>), </span>
<span id="cb139-3"><a href="introducción-al-lenguaje-r.html#cb139-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">method =</span> <span class="st">&quot;curl&quot;</span>, <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb139-4"><a href="introducción-al-lenguaje-r.html#cb139-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-5"><a href="introducción-al-lenguaje-r.html#cb139-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;</span><span class="sc">\\</span><span class="st">parc.csv&quot;</span>, <span class="at">sep=</span><span class="st">&quot;&quot;</span>),<span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb139-6"><a href="introducción-al-lenguaje-r.html#cb139-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-7"><a href="introducción-al-lenguaje-r.html#cb139-7" aria-hidden="true" tabindex="-1"></a>datos.df<span class="ot">&lt;-</span><span class="fu">data.frame</span>(data)</span>
<span id="cb139-8"><a href="introducción-al-lenguaje-r.html#cb139-8" aria-hidden="true" tabindex="-1"></a>model<span class="ot">&lt;-</span><span class="fu">lm</span>(VSC<span class="sc">~</span>HD, datos.df)</span>
<span id="cb139-9"><a href="introducción-al-lenguaje-r.html#cb139-9" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>)) <span class="co"># De esta forma creamos una estructura gráfica de 2x2</span></span>
<span id="cb139-10"><a href="introducción-al-lenguaje-r.html#cb139-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(model)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-76-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="introducción-al-lenguaje-r.html#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>)) <span class="co"># Y ahora volvemos a poner el sistema gráfico en su posición original</span></span></code></pre></div>
<p>Una última cuestión. Hasta ahora hemos estado trabajando con un conjunto
de datos sencillo, compuesto por dos variables. En el caso de disponer
de más y querer representarlas, deberemos modificar nuestra sentencia
para indicar este hecho:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="introducción-al-lenguaje-r.html#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(datos.df<span class="sc">$</span>VSC<span class="sc">~</span>datos.df<span class="sc">$</span>HD, <span class="at">main=</span><span class="st">&quot;Mi primer gráfico en R&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Volumen (m3)&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Altura (m)&quot;</span>, <span class="at">col=</span><span class="st">&quot;red&quot;</span>, <span class="at">type=</span><span class="st">&quot;p&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-77-1.png" width="384" style="display: block; margin: auto;" /></p>
<p>Como vemos las posibilidades gráficas de R son muy grandes y son objeto
de monografías exclusivas sobre sus capacidades.</p>
<div id="ggplot2" class="section level3" number="2.9.1">
<h3><span class="header-section-number">2.9.1</span> ggplot2</h3>
<p>La librería ggplot2 <span class="citation">(<a href="#ref-R-ggplot2" role="doc-biblioref">Wickham, Chang, et al. 2021</a>)</span> es un paquete que se ha convertido en
un imprescindible dentro del sistema R por sus capacidades gráficas. Si
bien cambia un poco la concepción que hasta ahora tenemos de los
gráficos, los beneficios que nos reporta suplen con creces su aparente
complejidad.</p>
<p>Este paquete se basa en elaborar un gráfico a partir de un proceso de
acumulación de capas o layers siendo su esquema constante según la
siguiente expresión:</p>
<blockquote>
<p>ggplot(data.frame, aes(x = variable)) + geom_forma() + stat_valor</p>
</blockquote>
<p>donde: - <code>data.frame</code> es nuestro objeto de datos (en formato
<code>data.frame</code>), - <code>aes()</code> controla la estética del gráfico, es decir los
elementos representables gráficamente (la posición x e y, el color,las
columnas de la tabla de datos…) - <code>geom_</code> lo define con puntos,
rectas, histogramas, densidades, etc. (además es capaz de superponer
distintas geometrías), - y <code>stat_()</code>, que es un resumen estdístico de
los datos asociado al tipo de geometría con que trabajamos.</p>
<p>Veamos un ejemplo:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="introducción-al-lenguaje-r.html#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">&quot;https://raw.githubusercontent.com/juliomsevilla/rlidar/main/data/Pesadas.txt&quot;</span>,</span>
<span id="cb142-2"><a href="introducción-al-lenguaje-r.html#cb142-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">destfile =</span> <span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;</span><span class="sc">\\</span><span class="st">Pesadas.txt&quot;</span>, <span class="at">sep=</span><span class="st">&quot;&quot;</span>),</span>
<span id="cb142-3"><a href="introducción-al-lenguaje-r.html#cb142-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">method =</span> <span class="st">&quot;curl&quot;</span>, <span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb142-4"><a href="introducción-al-lenguaje-r.html#cb142-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-5"><a href="introducción-al-lenguaje-r.html#cb142-5" aria-hidden="true" tabindex="-1"></a>arbol <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">paste</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;</span><span class="sc">\\</span><span class="st">Pesadas.txt&quot;</span>, <span class="at">sep=</span><span class="st">&quot;&quot;</span>),<span class="at">sep=</span><span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb142-6"><a href="introducción-al-lenguaje-r.html#cb142-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-7"><a href="introducción-al-lenguaje-r.html#cb142-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-8"><a href="introducción-al-lenguaje-r.html#cb142-8" aria-hidden="true" tabindex="-1"></a>arbol.df<span class="ot">&lt;-</span><span class="fu">data.frame</span>(arbol)</span>
<span id="cb142-9"><a href="introducción-al-lenguaje-r.html#cb142-9" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(arbol.df)</span></code></pre></div>
<pre><code>##  [1] &quot;CLM&quot;    &quot;CH&quot;     &quot;Clonal&quot; &quot;Edad&quot;   &quot;Arbol&quot;  &quot;Nb&quot;     &quot;Ht&quot;     &quot;Dn&quot;    
##  [9] &quot;Htmax&quot;  &quot;P&quot;      &quot;Pf&quot;     &quot;Ph&quot;</code></pre>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="introducción-al-lenguaje-r.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb144-2"><a href="introducción-al-lenguaje-r.html#cb144-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(arbol.df, <span class="fu">aes</span>(<span class="at">x =</span>CLM)) <span class="sc">+</span> <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-78-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Como vemos, le hemos indicado que utilice el conjunto de datos
<code>arbol.df</code>, que use en el eje horizontal los valores de <code>CLM</code> (al no
incluir datos en la vertical, realizará un conteo) y que el tipo de
gráfico sea de barras. En este punto, ggplot2 es muy versatil definiendo
el tipo de goemetría (o “gráfico”) aceptando multitud de variaciones:
<code>geom_bar</code>, <code>geom_point</code>,<code>geom_boxplot</code>, <code>geom_violin</code>, <code>geom_line</code>,…</p>
<p>Una de las ventajas del uso de ggplot2 es que podemos guardar el gráfico
en un objeto y añadir más capas. Por ejemplo, añadamos las etiquetas de
los ejes y el título:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="introducción-al-lenguaje-r.html#cb145-1" aria-hidden="true" tabindex="-1"></a>grafico<span class="ot">&lt;-</span><span class="fu">ggplot</span>(arbol.df, <span class="fu">aes</span>(<span class="at">x =</span> CLM)) <span class="sc">+</span> <span class="fu">geom_bar</span>()</span>
<span id="cb145-2"><a href="introducción-al-lenguaje-r.html#cb145-2" aria-hidden="true" tabindex="-1"></a>grafico<span class="sc">+</span><span class="fu">xlab</span>(<span class="st">&quot;Monte&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span> (<span class="st">&quot;Número de individuos&quot;</span>)<span class="sc">+</span><span class="fu">ggtitle</span>(<span class="st">&quot;Gráfico de individuos&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-79-1.png" width="288" style="display: block; margin: auto;" /></p>
<p>Ahora vamos a controlar la estética del gráfico, haciendo que las barras
sean más pequeñas y cambien de color:</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="introducción-al-lenguaje-r.html#cb146-1" aria-hidden="true" tabindex="-1"></a>grafico<span class="ot">&lt;-</span><span class="fu">ggplot</span>(arbol.df, <span class="fu">aes</span>(<span class="at">x =</span> CLM)) <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">width=</span><span class="fl">0.5</span>, <span class="at">colour=</span><span class="st">&quot;black&quot;</span>, <span class="at">fill=</span><span class="st">&quot;red&quot;</span>)</span>
<span id="cb146-2"><a href="introducción-al-lenguaje-r.html#cb146-2" aria-hidden="true" tabindex="-1"></a>grafico<span class="sc">+</span><span class="fu">xlab</span>(<span class="st">&quot;Monte&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span> (<span class="st">&quot;Número de individuos&quot;</span>)<span class="sc">+</span><span class="fu">ggtitle</span>(<span class="st">&quot;Gráfico de individuos&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-80-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Los temas (theme) son un conjunto de opciones predefinidas sobre la
apariencia de los objetos en ggplot. El tema por defecto del ggplot
dibuja el gráfico sobre un fondo gris. Podemos cambiarlo a otro tema
añadiendo el comando especifico. En este caso usamos el <code>theme_bw()</code> (es
interesante el paquete <code>ggthemes</code> que incorpora una gran variedad de
ellos):</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="introducción-al-lenguaje-r.html#cb147-1" aria-hidden="true" tabindex="-1"></a>grafico<span class="sc">+</span><span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-81-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Ahora vamos a ir un paso más allá. Vamos a crear un grafico de
dispersión, comparando dos variables y usaremos el comando <code>facet</code> que
permite reproducir el mismo gráfico en diferentes niveles de un factor:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="introducción-al-lenguaje-r.html#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Version nº1</span></span>
<span id="cb148-2"><a href="introducción-al-lenguaje-r.html#cb148-2" aria-hidden="true" tabindex="-1"></a>grafico<span class="ot">&lt;-</span><span class="fu">ggplot</span>(arbol.df, <span class="fu">aes</span>(<span class="at">x =</span> Ht, <span class="at">y=</span> Dn)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">width=</span><span class="fl">0.5</span>, <span class="at">colour=</span><span class="st">&quot;black&quot;</span>, <span class="at">fill=</span><span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: Ignoring unknown parameters: width</code></pre>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="introducción-al-lenguaje-r.html#cb150-1" aria-hidden="true" tabindex="-1"></a>grafico<span class="sc">+</span><span class="fu">xlab</span>(<span class="st">&quot;Altura&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span> (<span class="st">&quot;Diametro&quot;</span>)<span class="sc">+</span><span class="fu">ggtitle</span>(<span class="st">&quot;Gráfico de individuos&quot;</span>)<span class="sc">+</span> <span class="fu">facet_grid</span>(CLM <span class="sc">~</span>.)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-82-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="introducción-al-lenguaje-r.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Version nº2</span></span>
<span id="cb151-2"><a href="introducción-al-lenguaje-r.html#cb151-2" aria-hidden="true" tabindex="-1"></a>grafico<span class="ot">&lt;-</span><span class="fu">ggplot</span>(arbol.df, <span class="fu">aes</span>(<span class="at">x =</span> Ht, <span class="at">y=</span> Dn)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">width=</span><span class="fl">0.5</span>, <span class="at">colour=</span><span class="st">&quot;black&quot;</span>, <span class="at">fill=</span><span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: Ignoring unknown parameters: width</code></pre>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="introducción-al-lenguaje-r.html#cb153-1" aria-hidden="true" tabindex="-1"></a>grafico<span class="sc">+</span><span class="fu">xlab</span>(<span class="st">&quot;Altura&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span> (<span class="st">&quot;Diametro&quot;</span>)<span class="sc">+</span><span class="fu">ggtitle</span>(<span class="st">&quot;Gráfico de individuos&quot;</span>)<span class="sc">+</span> <span class="fu">facet_grid</span>(.<span class="sc">~</span> CLM)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-82-2.png" width="672" style="display: block; margin: auto;" /></p>
<p>¿Y si quisiéramos rotar los ejes para observar mejor nuestros datos?
Para ello podemos usar <code>coord_flip()</code>.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="introducción-al-lenguaje-r.html#cb154-1" aria-hidden="true" tabindex="-1"></a>grafico<span class="sc">+</span><span class="fu">xlab</span>(<span class="st">&quot;log de la altura&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span> (<span class="st">&quot;Número de individuos&quot;</span>)<span class="sc">+</span><span class="fu">ggtitle</span>(<span class="st">&quot;Gráfico de individuos&quot;</span>)<span class="sc">+</span> <span class="fu">facet_grid</span>(.<span class="sc">~</span> CLM)<span class="sc">+</span><span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-83-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Para finalizar, veamos la opción ´stat´ que como dijimos es un resumen
estadístico de los datos asociado al tipo de geometría con que
trabajamos:</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="introducción-al-lenguaje-r.html#cb155-1" aria-hidden="true" tabindex="-1"></a>grafico<span class="sc">+</span><span class="fu">xlab</span>(<span class="st">&quot;Altura&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span> (<span class="st">&quot;Diametro&quot;</span>)<span class="sc">+</span><span class="fu">ggtitle</span>(<span class="st">&quot;Gráfico de individuos&quot;</span>)<span class="sc">+</span> <span class="fu">stat_smooth</span>()</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-84-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="introducción-al-lenguaje-r.html#cb157-1" aria-hidden="true" tabindex="-1"></a>grafico<span class="sc">+</span><span class="fu">xlab</span>(<span class="st">&quot;Altura&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span> (<span class="st">&quot;Diametro&quot;</span>)<span class="sc">+</span><span class="fu">ggtitle</span>(<span class="st">&quot;Gráfico de individuos&quot;</span>)<span class="sc">+</span> <span class="fu">stat_smooth</span>(<span class="at">method=</span>lm)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-84-2.png" width="672" style="display: block; margin: auto;" /></p>
<p>En definitiva, las posibilidades son casi infinitas y evidentemente
escapa a los propósitos de este manual. Si se desea saber más sobre este
paquete, podemos consultar su manual oficial: <a href="http://ggplot2.org/book/">ggplot2: Elegant Graphics
for Data Analysis</a>.</p>
</div>
</div>
<div id="las-funciones-en-r" class="section level2" number="2.10">
<h2><span class="header-section-number">2.10</span> Las funciones en R</h2>
<p>Generalmente nuestros análisis consisten en una secuencia de comandos de
R (posiblemente insertados dentro de un fichero <code>.Rmd</code>) que se ejecutan
secuencialmente. En ocasiones, sin embargo, es conveniente crear
funciones, por ejemplo, cuando hay operaciones comunes que se realizan
reiteradamente (incluso en análisis distintos). Estas funciones
podríamos equipararlas a las tan conocidas <em>macros</em>.Estas funciones en R
requieren una bibliografía específica y son un capítulo aparte dentro de
este lenguaje de programación, por lo que solo vamos a dar unas
pinceladas para que se entiendan las funciones que se han plasmado a lo
largo de este manual.</p>
<p>Las funciones en R son tratadas como cualquier otro objeto y para
crearlas utilizamos el comando <code>function()</code>, el cual creará un objeto de
tipo <code>function</code>, para, a continuación llamarla, escribiendo el nombre de
la misma. La estructura básica es la siguiente</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="introducción-al-lenguaje-r.html#cb159-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>(argumentos) </span>
<span id="cb159-2"><a href="introducción-al-lenguaje-r.html#cb159-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb159-3"><a href="introducción-al-lenguaje-r.html#cb159-3" aria-hidden="true" tabindex="-1"></a>  <span class="do">## comandos de la función (body)</span></span>
<span id="cb159-4"><a href="introducción-al-lenguaje-r.html#cb159-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Veamos un ejemplo:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="introducción-al-lenguaje-r.html#cb160-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>() </span>
<span id="cb160-2"><a href="introducción-al-lenguaje-r.html#cb160-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb160-3"><a href="introducción-al-lenguaje-r.html#cb160-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Hola Mundo&quot;</span>)</span>
<span id="cb160-4"><a href="introducción-al-lenguaje-r.html#cb160-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb160-5"><a href="introducción-al-lenguaje-r.html#cb160-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-6"><a href="introducción-al-lenguaje-r.html#cb160-6" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>()</span></code></pre></div>
<pre><code>## Hola Mundo</code></pre>
<p>En este punto ya habremos llegado a la conclusión de donde está el final
del camino de las funciones: sí, en los paquetes. Un paquete no es más
que un conjunto de funciones, ordenadas y estandarizadas, de tal forma
que puedan ser replicables en todos nuestros análisis, y, si así lo
decidimos que otros puedan usarlas si las compartimos libremente.</p>
<div id="estructura-de-una-función" class="section level3" number="2.10.1">
<h3><span class="header-section-number">2.10.1</span> Estructura de una función</h3>
<p>Las funciones en R se componen de tres partes fundamentales:</p>
<ul>
<li>el cuerpo (body),</li>
<li>los argumentos (formals) y</li>
<li>el ambiente (environment)</li>
</ul>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="introducción-al-lenguaje-r.html#cb162-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) { x <span class="sc">+</span> y }</span>
<span id="cb162-2"><a href="introducción-al-lenguaje-r.html#cb162-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-3"><a href="introducción-al-lenguaje-r.html#cb162-3" aria-hidden="true" tabindex="-1"></a><span class="fu">body</span>(f)</span>
<span id="cb162-4"><a href="introducción-al-lenguaje-r.html#cb162-4" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb162-5"><a href="introducción-al-lenguaje-r.html#cb162-5" aria-hidden="true" tabindex="-1"></a> x <span class="sc">+</span> y</span>
<span id="cb162-6"><a href="introducción-al-lenguaje-r.html#cb162-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb162-7"><a href="introducción-al-lenguaje-r.html#cb162-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-8"><a href="introducción-al-lenguaje-r.html#cb162-8" aria-hidden="true" tabindex="-1"></a><span class="fu">formals</span>(f)</span>
<span id="cb162-9"><a href="introducción-al-lenguaje-r.html#cb162-9" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>x</span>
<span id="cb162-10"><a href="introducción-al-lenguaje-r.html#cb162-10" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>y</span>
<span id="cb162-11"><a href="introducción-al-lenguaje-r.html#cb162-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-12"><a href="introducción-al-lenguaje-r.html#cb162-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-13"><a href="introducción-al-lenguaje-r.html#cb162-13" aria-hidden="true" tabindex="-1"></a><span class="fu">environment</span>(f)</span>
<span id="cb162-14"><a href="introducción-al-lenguaje-r.html#cb162-14" aria-hidden="true" tabindex="-1"></a><span class="sc">&lt;</span>environment<span class="sc">:</span> R_GlobalEnv<span class="sc">&gt;</span></span></code></pre></div>
<p>El cuerpo es la sucesión de códigos y comandos que la función ejecutará
para realizar los propósitos que le pedimos, mientras que los argumentos
son una serie de valores que se le pasan a la función de forma que
ciertas variables dentro de la función tomen diversos valores. Ambios
son obligatorios para confeccionar nuestra función. Es importante
indicar que el orden con el que se incluyan en la declaración de la
variables es como se ubicarán en la función:</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="introducción-al-lenguaje-r.html#cb163-1" aria-hidden="true" tabindex="-1"></a>area_rectangulo <span class="ot">&lt;-</span> <span class="cf">function</span>(lado1, lado2) </span>
<span id="cb163-2"><a href="introducción-al-lenguaje-r.html#cb163-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb163-3"><a href="introducción-al-lenguaje-r.html#cb163-3" aria-hidden="true" tabindex="-1"></a>  area <span class="ot">&lt;-</span> lado1 <span class="sc">*</span> lado2</span>
<span id="cb163-4"><a href="introducción-al-lenguaje-r.html#cb163-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;el área es &quot;</span>, area))</span>
<span id="cb163-5"><a href="introducción-al-lenguaje-r.html#cb163-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb163-6"><a href="introducción-al-lenguaje-r.html#cb163-6" aria-hidden="true" tabindex="-1"></a><span class="fu">area_rectangulo</span>(<span class="at">lado1 =</span> <span class="dv">2</span>, <span class="at">lado2 =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;el área es  6&quot;</code></pre>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="introducción-al-lenguaje-r.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;el área es  6&quot;</span></span></code></pre></div>
<pre><code>## [1] &quot;el área es  6&quot;</code></pre>
</div>
</div>
<div id="publicación-de-resultados" class="section level2" number="2.11">
<h2><span class="header-section-number">2.11</span> Publicación de resultados</h2>
<p>Como hablamos, el sistema R no destaca especialmente por tratarse de un
sistema visual y amigable para los usuarios noveles que se enfrentan a
él. Ello se hace extensible a la publicación de los resultados, quizás
el aspecto menos desarrollado del software.</p>
<p>Esta carencia ha sido suplida, como no, por librerías que hacen más
sencillo el formateo de los resultados, su publicación y divulgación. En
concreto, y sobre cualquier otras, destacan las siguientes:</p>
<ul>
<li><p><code>knitr</code> <span class="citation">(<a href="#ref-R-knitr" role="doc-biblioref">Xie 2021</a>)</span>, que permite la confección de informes dinámicos
y reproducibles (esto es que se pueden modificar cada vez que
rehagamos algo en nuestro código), que permite integrar el lenguaje
R en otros documentos construidos en <code>LaTeX</code>, <code>HTML</code>,
<code>Markdown</code>,…<br />
Muy brevemente podríamos decir que <code>knitr</code> se basa en dos conceptos:
el fragmento literal de texto, escrito comúnmente en <code>Markdown</code> y el
fragmento de código R o <code>chunk</code> (la unión de ambos es lo que se
conoce como <code>RMarkdown</code>). Una vez compilamos nuestro informe
(proceso para lo cual se apoya en el software <code>pandoc</code>) tendremos,
por un lado el texto formateado, según las características que
hayamos definido en el encabezado del documento y los resultados de
los códigos, embebidos en el mismo. Entre las salidas básicas
tendremos el formato <code>HTML</code>, <code>docx</code> y <code>pdf</code>, si bien podremos
generar muchos más gracias a las excepcionales posibilidades que da
<code>Pandoc</code>.</p></li>
<li><p><code>shiny</code> <span class="citation">(<a href="#ref-R-shiny" role="doc-biblioref">Chang et al. 2021</a>)</span>, que se basa en el uso de Programación Reactiva
(Reactive Programming), esto es, existen unos valores que pueden
variar en el tiempo y que son registrados por unas expresiones que
posteriormente las reproducen. Junto a este motor de razonamiento,
incorpora, adaptadas, los clásicos elementos HTML (botones, cuadros
de texto, barras de desplazamiento,…) junto con las potentes
gráficas de R y su estructura de datos. Básicamente se compone de
dos ficheros que se crean en nuestro directorio local: <code>ui.R</code>, que
gestiona la salida visual y el aspecto de la aplicación y <code>server.R</code>
con las instrucciones para que la misma función, siendo en esta
última donde se embebe el motor de cálculo en realizado en R. Estos
archivos, que ya en las últimas versiones se encuentran embebidos en
uno solo <code>app.R</code>, son publicados en nuestro servidor web o en las
distintas plataformas que lo interpreten, como GitHub.<br />
Las posibilidades de <code>shiny</code> se amplían al admitir incorporaciones
al código nativo de todos los elementos que actualmente conforman
los ecosistemas <code>HTML</code>, <code>CSS</code> y <code>Javascript</code>, lo que implica que los
desarrollos que se puedan hacer con esta herramienta son casi
ilimitados. Esto la convierte en una herramienta muy poderosa para
la construcción de cuadros de mando y para mostrar los resultados de
nuestros desarrollos usando las capacidades analíticas de <code>R</code>, de
forma que el receptor de nuestra información pueda interactuar
fácilmente con ella.</p></li>
<li><p><code>flexdashboards</code> <span class="citation">(<a href="#ref-R-flexdashboard" role="doc-biblioref">Iannone, Allaire, and Borges 2020</a>)</span>, que permite, de una forma
extremadamente simple, crear cuadros de mando dinámicos e
interactivos a partir de código <code>Markdown</code>. Muy parecido en concepto
a <code>shiny</code> esta librería es adecuada si solo deseamos publicar
nuestros resultados en formato de cuadro de mando y se busca (por
ahora…) una menor interacción del usuario.</p></li>
</ul>
<div id="la-escritura-con-markdown" class="section level3" number="2.11.1">
<h3><span class="header-section-number">2.11.1</span> La escritura con Markdown</h3>
<p>Markdown es un lenguaje de marcado ligero ideado en 2004 por John
Gruber, con la visión de crear un lenguaje sencillo, fácil de leer y de
escribir, aprovechando las ventajas del lenguaje <code>HTML</code> pero eliminando
sus inconvenientes, como por ejemplo las etiquetas, que tanto engorran
el código. Pongamonos en situación: si estamos escribiendo en <code>HTML</code>,
para añadir una palabra en negrita deberíamos escribir
<code>&lt;strong&gt;importante&lt;/strong&gt;</code> mientras que si estamos escribiendo en
<code>Markdown</code>nos bastaría poner <code>**importante**</code> para que cuando lo
compilemos, se muestre de esta forma. Huelga decir, que en un procesador
de textos al uso deberemos dejar de escribir, coger el ratón, pulsar en
el botón de la negrita, volver a escribir, de nuevo coger el ratón, ir a
la barra de herramientas, desactivar el formato de negrita y continuar
escribiendo (…). A continuación podemos ver algunos ejemplos de la
notación de este lenguaje:</p>
<p><img src="https://raw.githubusercontent.com/juliomsevilla/rlidar/main/images/markdown.png" /></p>

</div>
</div>
</div>
<h3> Referencias</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-R-dummies" class="csl-entry">
Brown, Christopher. 2012. <em>Dummies: Create Dummy/Indicator Variables Flexibly and Efficiently</em>. <a href="http://www.decisionpatterns.com">http://www.decisionpatterns.com</a>.
</div>
<div id="ref-R-shiny" class="csl-entry">
Chang, Winston, Joe Cheng, JJ Allaire, Carson Sievert, Barret Schloerke, Yihui Xie, Jeff Allen, Jonathan McPherson, Alan Dipert, and Barbara Borges. 2021. <em>Shiny: Web Application Framework for r</em>. <a href="https://shiny.rstudio.com/">https://shiny.rstudio.com/</a>.
</div>
<div id="ref-R-car" class="csl-entry">
Fox, John, Sanford Weisberg, and Brad Price. 2021. <em>Car: Companion to Applied Regression</em>. <a href="https://CRAN.R-project.org/package=car">https://CRAN.R-project.org/package=car</a>.
</div>
<div id="ref-R-installr" class="csl-entry">
Galili, Tal. 2021. <em>Installr: Using r to Install Stuff on Windows OS (Such as: R, Rtools, RStudio, Git, and More!)</em>. <a href="https://CRAN.R-project.org/package=installr">https://CRAN.R-project.org/package=installr</a>.
</div>
<div id="ref-R-flexdashboard" class="csl-entry">
Iannone, Richard, JJ Allaire, and Barbara Borges. 2020. <em>Flexdashboard: R Markdown Format for Flexible Dashboards</em>. <a href="http://rmarkdown.rstudio.com/flexdashboard">http://rmarkdown.rstudio.com/flexdashboard</a>.
</div>
<div id="ref-R-jsonlite" class="csl-entry">
Ooms, Jeroen. 2020. <em>Jsonlite: A Simple and Robust JSON Parser and Generator for r</em>. <a href="https://CRAN.R-project.org/package=jsonlite">https://CRAN.R-project.org/package=jsonlite</a>.
</div>
<div id="ref-R-base" class="csl-entry">
R Core Team. 2020. <em>R: A Language and Environment for Statistical Computing</em>. Vienna, Austria: R Foundation for Statistical Computing. <a href="https://www.R-project.org/">https://www.R-project.org/</a>.
</div>
<div id="ref-R-RCurl" class="csl-entry">
Temple Lang, Duncan. 2021a. <em>RCurl: General Network (HTTP/FTP/...) Client Interface for r</em>. <a href="https://CRAN.R-project.org/package=RCurl">https://CRAN.R-project.org/package=RCurl</a>.
</div>
<div id="ref-R-XML" class="csl-entry">
———. 2021b. <em>XML: Tools for Parsing and Generating XML Within r and s-Plus</em>. <a href="http://www.omegahat.net/RSXML">http://www.omegahat.net/RSXML</a>.
</div>
<div id="ref-R-ggplot2" class="csl-entry">
Wickham, Hadley, Winston Chang, Lionel Henry, Thomas Lin Pedersen, Kohske Takahashi, Claus Wilke, Kara Woo, Hiroaki Yutani, and Dewey Dunnington. 2021. <em>Ggplot2: Create Elegant Data Visualisations Using the Grammar of Graphics</em>. <a href="https://CRAN.R-project.org/package=ggplot2">https://CRAN.R-project.org/package=ggplot2</a>.
</div>
<div id="ref-R-dplyr" class="csl-entry">
Wickham, Hadley, Romain François, Lionel Henry, and Kirill Müller. 2021. <em>Dplyr: A Grammar of Data Manipulation</em>. <a href="https://CRAN.R-project.org/package=dplyr">https://CRAN.R-project.org/package=dplyr</a>.
</div>
<div id="ref-R-scales" class="csl-entry">
Wickham, Hadley, and Dana Seidel. 2020. <em>Scales: Scale Functions for Visualization</em>. <a href="https://CRAN.R-project.org/package=scales">https://CRAN.R-project.org/package=scales</a>.
</div>
<div id="ref-R-knitr" class="csl-entry">
Xie, Yihui. 2021. <em>Knitr: A General-Purpose Package for Dynamic Report Generation in r</em>. <a href="https://yihui.org/knitr/">https://yihui.org/knitr/</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="la-tecnología-lidar-y-su-aplicación-al-medio-forestal.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="r-y-lidar.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
